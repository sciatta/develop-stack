
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Kafka分布式消息流平台 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-auto-scroll-table/website.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-donate/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="Kafka监控工具.html" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"sciatta","repo":"develop-stack","type":"star","count":true,"size":"small"}]};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../../">
            
                <a href="../../../../">
            
                    
                    前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                    Develop
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" >
            
                <span>
            
                    
                    Java
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" >
            
                <span>
            
                    
                    JVM
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1.1" data-path="../../java/jvm/JVM核心技术.html">
            
                <a href="../../java/jvm/JVM核心技术.html">
            
                    
                    JVM核心技术
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.1.2" data-path="../../java/jvm/JDK工具.html">
            
                <a href="../../java/jvm/JDK工具.html">
            
                    
                    JDK工具
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" >
            
                <span>
            
                    
                    IO
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.2.1" data-path="../../java/io/NIO模型与Netty.html">
            
                <a href="../../java/io/NIO模型与Netty.html">
            
                    
                    NIO模型与Netty
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" >
            
                <span>
            
                    
                    Concurrency
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.3.1" data-path="../../java/concurrency/并发编程.html">
            
                <a href="../../java/concurrency/并发编程.html">
            
                    
                    并发编程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" >
            
                <span>
            
                    
                    Algorithm
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../../algorithm/数据结构和算法.html">
            
                <a href="../../algorithm/数据结构和算法.html">
            
                    
                    数据结构和算法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" >
            
                <span>
            
                    
                    Spring
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="../../spring/SpringCore核心功能.html">
            
                <a href="../../spring/SpringCore核心功能.html">
            
                    
                    SpringCore核心功能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="../../spring/SpringBoot核心功能.html">
            
                <a href="../../spring/SpringBoot核心功能.html">
            
                    
                    SpringBoot核心功能
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" >
            
                <span>
            
                    
                    RPC
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" >
            
                <span>
            
                    
                    Dubbo
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1.1" data-path="../../rpc/dubbo/Dubbo源码分析.html">
            
                <a href="../../rpc/dubbo/Dubbo源码分析.html">
            
                    
                    Dubbo源码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5" >
            
                <span>
            
                    
                    MQ
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" >
            
                <span>
            
                    
                    Kafka
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1.1" data-path="Kafka集群安装部署.html">
            
                <a href="Kafka集群安装部署.html">
            
                    
                    Kafka集群安装部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.1.2" data-path="Kafka监控工具.html">
            
                <a href="Kafka监控工具.html">
            
                    
                    Kafka监控工具
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.5.1.3" data-path="Kafka分布式消息流平台.html">
            
                <a href="Kafka分布式消息流平台.html">
            
                    
                    Kafka分布式消息流平台
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.6" >
            
                <span>
            
                    
                    Hadoop
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.6.1" >
            
                <span>
            
                    
                    HDFS
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.6.1.1" data-path="../../hadoop/hdfs/HDFS核心功能原理.html">
            
                <a href="../../hadoop/hdfs/HDFS核心功能原理.html">
            
                    
                    HDFS核心功能原理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.1.2" data-path="../../hadoop/hdfs/HDFS命令.html">
            
                <a href="../../hadoop/hdfs/HDFS命令.html">
            
                    
                    HDFS命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.1.3" data-path="../../hadoop/hdfs/HDFS源码分析.html">
            
                <a href="../../hadoop/hdfs/HDFS源码分析.html">
            
                    
                    HDFS源码分析
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.6.2" >
            
                <span>
            
                    
                    MapReduce
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.6.2.1" data-path="../../hadoop/mapreduce/MapReduce工作原理.html">
            
                <a href="../../hadoop/mapreduce/MapReduce工作原理.html">
            
                    
                    MapReduce工作原理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.6.3" >
            
                <span>
            
                    
                    YARN
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.6.3.1" data-path="../../hadoop/yarn/YARN架构.html">
            
                <a href="../../hadoop/yarn/YARN架构.html">
            
                    
                    YARN架构
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.6.4" data-path="../../hadoop/Hadoop集群安装部署.html">
            
                <a href="../../hadoop/Hadoop集群安装部署.html">
            
                    
                    Hadoop集群安装部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.5" data-path="../../hadoop/Hadoop HA集群安装部署.html">
            
                <a href="../../hadoop/Hadoop HA集群安装部署.html">
            
                    
                    Hadoop HA集群安装部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6.6" data-path="../../hadoop/Hadoop企业级调优.html">
            
                <a href="../../hadoop/Hadoop企业级调优.html">
            
                    
                    Hadoop企业级调优
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.7" >
            
                <span>
            
                    
                    ZooKeeper
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.7.1" data-path="../../zookeeper/ZooKeeper集群安装部署.html">
            
                <a href="../../zookeeper/ZooKeeper集群安装部署.html">
            
                    
                    ZooKeeper集群安装部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7.2" data-path="../../zookeeper/ZooKeeper分布式协调框架.html">
            
                <a href="../../zookeeper/ZooKeeper分布式协调框架.html">
            
                    
                    ZooKeeper分布式协调框架
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.8" >
            
                <span>
            
                    
                    Hive
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.8.1" data-path="../../hive/Hive安装部署.html">
            
                <a href="../../hive/Hive安装部署.html">
            
                    
                    Hive安装部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8.2" data-path="../../hive/大数据分析利器之Hive.html">
            
                <a href="../../hive/大数据分析利器之Hive.html">
            
                    
                    大数据分析利器之Hive
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8.3" data-path="../../hive/Hive调优.html">
            
                <a href="../../hive/Hive调优.html">
            
                    
                    Hive调优
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.9" >
            
                <span>
            
                    
                    HBase
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.9.1" data-path="../../hbase/HBase集群安装部署.html">
            
                <a href="../../hbase/HBase集群安装部署.html">
            
                    
                    HBase集群安装部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9.2" data-path="../../hbase/大数据数据库之HBase.html">
            
                <a href="../../hbase/大数据数据库之HBase.html">
            
                    
                    大数据数据库之HBase
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.10" >
            
                <span>
            
                    
                    Flume
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.10.1" data-path="../../flume/Flume安装部署.html">
            
                <a href="../../flume/Flume安装部署.html">
            
                    
                    Flume安装部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10.2" data-path="../../flume/Flume数据采集.html">
            
                <a href="../../flume/Flume数据采集.html">
            
                    
                    Flume数据采集
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.11" >
            
                <span>
            
                    
                    Sqoop
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.11.1" data-path="../../sqoop/Sqoop安装部署.html">
            
                <a href="../../sqoop/Sqoop安装部署.html">
            
                    
                    Sqoop安装部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.11.2" data-path="../../sqoop/Sqoop数据迁移.html">
            
                <a href="../../sqoop/Sqoop数据迁移.html">
            
                    
                    Sqoop数据迁移
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.12" >
            
                <span>
            
                    
                    Azkaban
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.12.1" data-path="../../azkaban/Azkaban安装部署.html">
            
                <a href="../../azkaban/Azkaban安装部署.html">
            
                    
                    Azkaban安装部署
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.12.2" data-path="../../azkaban/Azkaban工作流调度器.html">
            
                <a href="../../azkaban/Azkaban工作流调度器.html">
            
                    
                    Azkaban工作流调度器
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.13" >
            
                <span>
            
                    
                    Spark
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.13.1" >
            
                <span>
            
                    
                    SparkCore
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.13.1.1" data-path="../../spark/sparkcore/SparkCore核心功能.html">
            
                <a href="../../spark/sparkcore/SparkCore核心功能.html">
            
                    
                    SparkCore核心功能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.13.1.2" data-path="../../spark/sparkcore/Spark调优.html">
            
                <a href="../../spark/sparkcore/Spark调优.html">
            
                    
                    Spark调优
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.13.2" >
            
                <span>
            
                    
                    SparkSQL
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.13.2.1" data-path="../../spark/sparksql/SparkSQL核心功能.html">
            
                <a href="../../spark/sparksql/SparkSQL核心功能.html">
            
                    
                    SparkSQL核心功能
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.13.3" data-path="../../spark/Spark集群安装部署.html">
            
                <a href="../../spark/Spark集群安装部署.html">
            
                    
                    Spark集群安装部署
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    Database
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                    MySQL
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../../database/mysql/MySQL安装.html">
            
                <a href="../../../database/mysql/MySQL安装.html">
            
                    
                    MySQL安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../../../database/mysql/MySQL实践.html">
            
                <a href="../../../database/mysql/MySQL实践.html">
            
                    
                    MySQL实践
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../../../database/mysql/SQL经典50题.html">
            
                <a href="../../../database/mysql/SQL经典50题.html">
            
                    
                    SQL经典50题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" >
            
                <span>
            
                    
                    Redis
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../../../database/redis/Redis核心功能.html">
            
                <a href="../../../database/redis/Redis核心功能.html">
            
                    
                    Redis核心功能
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    VersionControl
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" >
            
                <span>
            
                    
                    Git
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../../../versioncontrol/git/GitBook&GitHub&Typora最佳实践.html">
            
                <a href="../../../versioncontrol/git/GitBook&GitHub&Typora最佳实践.html">
            
                    
                    GitBook&GitHub&Typora最佳实践
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="../../../versioncontrol/git/Git命令.html">
            
                <a href="../../../versioncontrol/git/Git命令.html">
            
                    
                    Git命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="../../../versioncontrol/git/GitHub日常使用.html">
            
                <a href="../../../versioncontrol/git/GitHub日常使用.html">
            
                    
                    GitHub日常使用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Virtualization
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" >
            
                <span>
            
                    
                    VMware
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1.1" data-path="../../../virtualization/vmware/VMware系统安装.html">
            
                <a href="../../../virtualization/vmware/VMware系统安装.html">
            
                    
                    VMware系统安装
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5.2" >
            
                <span>
            
                    
                    Docker
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.2.1" data-path="../../../virtualization/docker/Docker实践.html">
            
                <a href="../../../virtualization/docker/Docker实践.html">
            
                    
                    Docker实践
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    OS
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" >
            
                <span>
            
                    
                    Linux
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1.1" data-path="../../../os/linux/Linux命令.html">
            
                <a href="../../../os/linux/Linux命令.html">
            
                    
                    Linux命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.1.2" data-path="../../../os/linux/iTerm的使用.html">
            
                <a href="../../../os/linux/iTerm的使用.html">
            
                    
                    iTerm的使用
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    IDE
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" >
            
                <span>
            
                    
                    IntelliJ IDEA
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1.1" data-path="../../../ide/intellijidea/IDEA配置开发环境.html">
            
                <a href="../../../ide/intellijidea/IDEA配置开发环境.html">
            
                    
                    IDEA配置开发环境
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.2" data-path="../../../ide/intellijidea/IDEA创建GitHub项目.html">
            
                <a href="../../../ide/intellijidea/IDEA创建GitHub项目.html">
            
                    
                    IDEA创建GitHub项目
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    CloudPlatform
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" >
            
                <span>
            
                    
                    vultr
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.1" data-path="../../../cloudplatform/vultr/Shadowsocks服务端配置.html">
            
                <a href="../../../cloudplatform/vultr/Shadowsocks服务端配置.html">
            
                    
                    Shadowsocks服务端配置
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    [后记]
            
                </span>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../../.." >Kafka分布式消息流平台</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon "></span><a href="#&#x6D88;&#x606F;&#x7CFB;&#x7EDF;"><b>1. </b>&#x6D88;&#x606F;&#x7CFB;&#x7EDF;</a></li><ul><li><span class="title-icon "></span><a href="#&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x6709;&#x6D88;&#x606F;&#x7CFB;&#x7EDF;"><b>1.1. </b>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x6709;&#x6D88;&#x606F;&#x7CFB;&#x7EDF;</a></li><li><span class="title-icon "></span><a href="#&#x6838;&#x5FC3;&#x6982;&#x5FF5;"><b>1.2. </b>&#x6838;&#x5FC3;&#x6982;&#x5FF5;</a></li><li><span class="title-icon "></span><a href="#&#x7279;&#x6027;"><b>1.3. </b>&#x7279;&#x6027;</a></li><li><span class="title-icon "></span><a href="#&#x6D88;&#x606F;&#x5904;&#x7406;&#x6A21;&#x5F0F;"><b>1.4. </b>&#x6D88;&#x606F;&#x5904;&#x7406;&#x6A21;&#x5F0F;</a></li><li><span class="title-icon "></span><a href="#&#x6D88;&#x606F;&#x5904;&#x7406;&#x7684;&#x4FDD;&#x969C;"><b>1.5. </b>&#x6D88;&#x606F;&#x5904;&#x7406;&#x7684;&#x4FDD;&#x969C;</a></li><li><span class="title-icon "></span><a href="#&#x6D88;&#x606F;&#x534F;&#x8BAE;"><b>1.6. </b>&#x6D88;&#x606F;&#x534F;&#x8BAE;</a></li><ul><li><span class="title-icon "></span><a href="#stomp"><b>1.6.1. </b>STOMP</a></li><li><span class="title-icon "></span><a href="#jms"><b>1.6.2. </b>JMS</a></li><li><span class="title-icon "></span><a href="#amqp"><b>1.6.3. </b>AMQP</a></li><li><span class="title-icon "></span><a href="#mqtt"><b>1.6.4. </b>MQTT</a></li></ul><li><span class="title-icon "></span><a href="#&#x6D88;&#x606F;&#x961F;&#x5217;&#x7684;&#x901A;&#x7528;&#x7ED3;&#x6784;"><b>1.7. </b>&#x6D88;&#x606F;&#x961F;&#x5217;&#x7684;&#x901A;&#x7528;&#x7ED3;&#x6784;</a></li></ul><li><span class="title-icon "></span><a href="#kafka&#x6838;&#x5FC3;&#x539F;&#x7406;"><b>2. </b>Kafka&#x6838;&#x5FC3;&#x539F;&#x7406;</a></li><ul><li><span class="title-icon "></span><a href="#&#x96C6;&#x7FA4;&#x67B6;&#x6784;"><b>2.1. </b>&#x96C6;&#x7FA4;&#x67B6;&#x6784;</a></li><li><span class="title-icon "></span><a href="#&#x547D;&#x4EE4;&#x884C;&#x7684;&#x7BA1;&#x7406;&#x4F7F;&#x7528;"><b>2.2. </b>&#x547D;&#x4EE4;&#x884C;&#x7684;&#x7BA1;&#x7406;&#x4F7F;&#x7528;</a></li><li><span class="title-icon "></span><a href="#&#x5206;&#x533A;&#x7B56;&#x7565;"><b>2.3. </b>&#x5206;&#x533A;&#x7B56;&#x7565;</a></li><ul><li><span class="title-icon "></span><a href="#&#x6307;&#x5B9A;&#x5177;&#x4F53;&#x7684;&#x5206;&#x533A;&#x53F7;"><b>2.3.1. </b>&#x6307;&#x5B9A;&#x5177;&#x4F53;&#x7684;&#x5206;&#x533A;&#x53F7;</a></li><li><span class="title-icon "></span><a href="#&#x6309;&#x7167;key&#x7684;hashcode&#xFF08;kafka&#x89C4;&#x5219;&#xFF09;&#x5206;&#x533A;"><b>2.3.2. </b>&#x6309;&#x7167;key&#x7684;hashcode&#xFF08;kafka&#x89C4;&#x5219;&#xFF09;&#x5206;&#x533A;</a></li><li><span class="title-icon "></span><a href="#&#x4E0D;&#x6307;&#x5B9A;key&#x6309;&#x7167;value&#x8F6E;&#x5FAA;&#x5206;&#x533A;"><b>2.3.3. </b>&#x4E0D;&#x6307;&#x5B9A;key&#x6309;&#x7167;value&#x8F6E;&#x5FAA;&#x5206;&#x533A;</a></li><li><span class="title-icon "></span><a href="#&#x81EA;&#x5B9A;&#x4E49;&#x5206;&#x533A;"><b>2.3.4. </b>&#x81EA;&#x5B9A;&#x4E49;&#x5206;&#x533A;</a></li></ul><li><span class="title-icon "></span><a href="#&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x673A;&#x5236;"><b>2.4. </b>&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x673A;&#x5236;</a></li><ul><li><span class="title-icon "></span><a href="#&#x6570;&#x636E;&#x6D88;&#x8D39;&#x6709;&#x5E8F;&#x6027;&#x95EE;&#x9898;"><b>2.4.1. </b>&#x6570;&#x636E;&#x6D88;&#x8D39;&#x6709;&#x5E8F;&#x6027;&#x95EE;&#x9898;</a></li><li><span class="title-icon "></span><a href="#segment&#x6587;&#x4EF6;"><b>2.4.2. </b>segment&#x6587;&#x4EF6;</a></li><li><span class="title-icon "></span><a href="#&#x5982;&#x4F55;&#x5FEB;&#x901F;&#x67E5;&#x8BE2;&#x6570;&#x636E;"><b>2.4.3. </b>&#x5982;&#x4F55;&#x5FEB;&#x901F;&#x67E5;&#x8BE2;&#x6570;&#x636E;</a></li></ul><li><span class="title-icon "></span><a href="#&#x9AD8;&#x541E;&#x5410;&#x3001;&#x4F4E;&#x5EF6;&#x65F6;&#x7684;&#x539F;&#x56E0;"><b>2.5. </b>&#x9AD8;&#x541E;&#x5410;&#x3001;&#x4F4E;&#x5EF6;&#x65F6;&#x7684;&#x539F;&#x56E0;</a></li><ul><li><span class="title-icon "></span><a href="#&#x987A;&#x5E8F;&#x8BFB;&#x5199;"><b>2.5.1. </b>&#x987A;&#x5E8F;&#x8BFB;&#x5199;</a></li><li><span class="title-icon "></span><a href="#page-cache&#xFF08;&#x9875;&#x7F13;&#x5B58;&#xFF09;"><b>2.5.2. </b>Page Cache&#xFF08;&#x9875;&#x7F13;&#x5B58;&#xFF09;</a></li><li><span class="title-icon "></span><a href="#&#x96F6;&#x62F7;&#x8D1D;"><b>2.5.3. </b>&#x96F6;&#x62F7;&#x8D1D;</a></li><li><span class="title-icon "></span><a href="#&#x5206;&#x533A;&#x5206;&#x6BB5;"><b>2.5.4. </b>&#x5206;&#x533A;&#x5206;&#x6BB5;</a></li><li><span class="title-icon "></span><a href="#&#x7D22;&#x5F15;&#x4F18;&#x5316;"><b>2.5.5. </b>&#x7D22;&#x5F15;&#x4F18;&#x5316;</a></li><li><span class="title-icon "></span><a href="#&#x6279;&#x91CF;&#x8BFB;&#x5199;"><b>2.5.6. </b>&#x6279;&#x91CF;&#x8BFB;&#x5199;</a></li></ul><li><span class="title-icon "></span><a href="#&#x5185;&#x6838;&#x539F;&#x7406;"><b>2.6. </b>&#x5185;&#x6838;&#x539F;&#x7406;</a></li><ul><li><span class="title-icon "></span><a href="#hwleo&#x57FA;&#x672C;&#x6982;&#x5FF5;"><b>2.6.1. </b>HW&amp;LEO&#x57FA;&#x672C;&#x6982;&#x5FF5;</a></li><li><span class="title-icon "></span><a href="#hwleo&#x66F4;&#x65B0;&#x6D41;&#x7A0B;"><b>2.6.2. </b>HW&amp;LEO&#x66F4;&#x65B0;&#x6D41;&#x7A0B;</a></li><li><span class="title-icon "></span><a href="#producer&#x6D88;&#x606F;&#x53D1;&#x9001;&#x6D41;&#x7A0B;"><b>2.6.3. </b>producer&#x6D88;&#x606F;&#x53D1;&#x9001;&#x6D41;&#x7A0B;</a></li><li><span class="title-icon "></span><a href="#consumer-&#x6D88;&#x8D39;&#x539F;&#x7406;"><b>2.6.4. </b>consumer &#x6D88;&#x8D39;&#x539F;&#x7406;</a></li></ul><li><span class="title-icon "></span><a href="#&#x6838;&#x5FC3;&#x53C2;&#x6570;"><b>2.7. </b>&#x6838;&#x5FC3;&#x53C2;&#x6570;</a></li><ul><li><span class="title-icon "></span><a href="#producer"><b>2.7.1. </b>Producer</a></li><li><span class="title-icon "></span><a href="#broker"><b>2.7.2. </b>Broker</a></li><li><span class="title-icon "></span><a href="#consumer"><b>2.7.3. </b>Consumer</a></li></ul></ul><li><span class="title-icon "></span><a href="#kafka&#x7CFB;&#x7EDF;&#x96C6;&#x6210;"><b>3. </b>Kafka&#x7CFB;&#x7EDF;&#x96C6;&#x6210;</a></li><ul><li><span class="title-icon "></span><a href="#&#x6574;&#x5408;flume"><b>3.1. </b>&#x6574;&#x5408;flume</a></li><ul><li><span class="title-icon "></span><a href="#flume-&#x914D;&#x7F6E;"><b>3.1.1. </b>flume &#x914D;&#x7F6E;</a></li><li><span class="title-icon "></span><a href="#&#x521B;&#x5EFA;topic"><b>3.1.2. </b>&#x521B;&#x5EFA;topic</a></li><li><span class="title-icon "></span><a href="#&#x542F;&#x52A8;flume"><b>3.1.3. </b>&#x542F;&#x52A8;flume</a></li><li><span class="title-icon "></span><a href="#&#x5411;flume&#x53D1;&#x9001;&#x6570;&#x636E;"><b>3.1.4. </b>&#x5411;flume&#x53D1;&#x9001;&#x6570;&#x636E;</a></li><li><span class="title-icon "></span><a href="#&#x9A8C;&#x8BC1;kafka&#x6570;&#x636E;&#x5199;&#x5165;&#x6210;&#x529F;"><b>3.1.5. </b>&#x9A8C;&#x8BC1;kafka&#x6570;&#x636E;&#x5199;&#x5165;&#x6210;&#x529F;</a></li></ul></ul></ul></div><a href="#&#x6D88;&#x606F;&#x7CFB;&#x7EDF;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="&#x6D88;&#x606F;&#x7CFB;&#x7EDF;"><a name="&#x6D88;&#x606F;&#x7CFB;&#x7EDF;" class="anchor-navigation-ex-anchor" href="#&#x6D88;&#x606F;&#x7CFB;&#x7EDF;"><i class="fa fa-link" aria-hidden="true"></i></a>1. &#x6D88;&#x606F;&#x7CFB;&#x7EDF;</h1>
<h2 id="&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x6709;&#x6D88;&#x606F;&#x7CFB;&#x7EDF;"><a name="&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x6709;&#x6D88;&#x606F;&#x7CFB;&#x7EDF;" class="anchor-navigation-ex-anchor" href="#&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x6709;&#x6D88;&#x606F;&#x7CFB;&#x7EDF;"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. &#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x6709;&#x6D88;&#x606F;&#x7CFB;&#x7EDF;</h2>
<p><strong>&#x89E3;&#x8026;</strong>
&#x5141;&#x8BB8;&#x4F60;&#x72EC;&#x7ACB;&#x7684;&#x6269;&#x5C55;&#x6216;&#x4FEE;&#x6539;&#x4E24;&#x8FB9;&#x7684;&#x5904;&#x7406;&#x8FC7;&#x7A0B;&#xFF0C;&#x53EA;&#x8981;&#x786E;&#x4FDD;&#x5B83;&#x4EEC;&#x9075;&#x5B88;&#x540C;&#x6837;&#x7684;&#x63A5;&#x53E3;&#x7EA6;&#x675F;&#x3002;&#x7CFB;&#x7EDF;&#x4E0D;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#xFF0C;&#x964D;&#x4F4E;&#x4F9D;&#x8D56;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x4E0D;&#x5728;&#x7EBF;&#x4E5F;&#x80FD;&#x4FDD;&#x6301;&#x901A;&#x4FE1;&#x6700;&#x7EC8;&#x5B8C;&#x6210;&#x3002;</p>
<p><strong>&#x5197;&#x4F59;</strong>
&#x6D88;&#x606F;&#x961F;&#x5217;&#x628A;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6301;&#x4E45;&#x5316;&#x76F4;&#x5230;&#x5B83;&#x4EEC;&#x5DF2;&#x7ECF;&#x88AB;&#x5B8C;&#x5168;&#x5904;&#x7406;&#xFF0C;&#x901A;&#x8FC7;&#x8FD9;&#x4E00;&#x65B9;&#x5F0F;&#x89C4;&#x907F;&#x4E86;&#x6570;&#x636E;&#x4E22;&#x5931;&#x98CE;&#x9669;&#x3002;&#x8BB8;&#x591A;&#x6D88;&#x606F;&#x961F;&#x5217;&#x6240;&#x91C7;&#x7528;&#x7684;&quot;&#x63D2;&#x5165;-&#x83B7;&#x53D6;-&#x5220;&#x9664;&quot;&#x8303;&#x5F0F;&#x4E2D;&#xFF0C;&#x5728;&#x628A;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x4ECE;&#x961F;&#x5217;&#x4E2D;&#x5220;&#x9664;&#x4E4B;&#x524D;&#xFF0C;&#x9700;&#x8981;&#x4F60;&#x7684;&#x5904;&#x7406;&#x7CFB;&#x7EDF;&#x660E;&#x786E;&#x7684;&#x6307;&#x51FA;&#x8BE5;&#x6D88;&#x606F;&#x5DF2;&#x7ECF;&#x88AB;&#x5904;&#x7406;&#x5B8C;&#x6BD5;&#xFF0C;&#x4ECE;&#x800C;&#x786E;&#x4FDD;&#x4F60;&#x7684;&#x6570;&#x636E;&#x88AB;&#x5B89;&#x5168;&#x7684;&#x4FDD;&#x5B58;&#x76F4;&#x5230;&#x4F60;&#x4F7F;&#x7528;&#x5B8C;&#x6BD5;&#x3002;</p>
<p><strong>&#x6269;&#x5C55;&#x6027;</strong>
&#x56E0;&#x4E3A;&#x6D88;&#x606F;&#x961F;&#x5217;&#x89E3;&#x8026;&#x4E86;&#x4F60;&#x7684;&#x5904;&#x7406;&#x8FC7;&#x7A0B;&#xFF0C;&#x6240;&#x4EE5;&#x589E;&#x5927;&#x6D88;&#x606F;&#x5165;&#x961F;&#x548C;&#x5904;&#x7406;&#x7684;&#x9891;&#x7387;&#x662F;&#x5F88;&#x5BB9;&#x6613;&#x7684;&#xFF0C;&#x53EA;&#x8981;&#x53E6;&#x5916;&#x589E;&#x52A0;&#x5904;&#x7406;&#x8FC7;&#x7A0B;&#x5373;&#x53EF;&#x3002;</p>
<p><strong>&#x7075;&#x6D3B;&#x6027; &amp; &#x5CF0;&#x503C;&#x5904;&#x7406;&#x80FD;&#x529B;</strong>
&#x5728;&#x8BBF;&#x95EE;&#x91CF;&#x5267;&#x589E;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5E94;&#x7528;&#x4ECD;&#x7136;&#x9700;&#x8981;&#x7EE7;&#x7EED;&#x53D1;&#x6325;&#x4F5C;&#x7528;&#xFF0C;&#x4F46;&#x662F;&#x8FD9;&#x6837;&#x7684;&#x7A81;&#x53D1;&#x6D41;&#x91CF;&#x5E76;&#x4E0D;&#x5E38;&#x89C1;&#x3002;&#x5982;&#x679C;&#x4E3A;&#x4EE5;&#x80FD;&#x5904;&#x7406;&#x8FD9;&#x7C7B;&#x5CF0;&#x503C;&#x8BBF;&#x95EE;&#x4E3A;&#x6807;&#x51C6;&#x6765;&#x6295;&#x5165;&#x8D44;&#x6E90;&#x968F;&#x65F6;&#x5F85;&#x547D;&#x65E0;&#x7591;&#x662F;&#x5DE8;&#x5927;&#x7684;&#x6D6A;&#x8D39;&#x3002;&#x4F7F;&#x7528;&#x6D88;&#x606F;&#x961F;&#x5217;&#x80FD;&#x591F;&#x4F7F;&#x5173;&#x952E;&#x7EC4;&#x4EF6;&#x9876;&#x4F4F;&#x7A81;&#x53D1;&#x7684;&#x8BBF;&#x95EE;&#x538B;&#x529B;&#xFF0C;&#x800C;&#x4E0D;&#x4F1A;&#x56E0;&#x4E3A;&#x7A81;&#x53D1;&#x7684;&#x8D85;&#x8D1F;&#x8377;&#x7684;&#x8BF7;&#x6C42;&#x800C;&#x5B8C;&#x5168;&#x5D29;&#x6E83;&#x3002;&#x538B;&#x529B;&#x5927;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x7F13;&#x51B2;&#x90E8;&#x5206;&#x8BF7;&#x6C42;&#x6D88;&#x606F;&#xFF0C;&#x7C7B;&#x4F3C;&#x4E8E;&#x80CC;&#x538B;&#x5904;&#x7406;&#x3002; </p>
<p><strong>&#x53EF;&#x6062;&#x590D;&#x6027;</strong>
&#x7CFB;&#x7EDF;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x7EC4;&#x4EF6;&#x5931;&#x6548;&#x65F6;&#xFF0C;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x5230;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#x3002;&#x6D88;&#x606F;&#x961F;&#x5217;&#x964D;&#x4F4E;&#x4E86;&#x8FDB;&#x7A0B;&#x95F4;&#x7684;&#x8026;&#x5408;&#x5EA6;&#xFF0C;&#x6240;&#x4EE5;&#x5373;&#x4F7F;&#x4E00;&#x4E2A;&#x5904;&#x7406;&#x6D88;&#x606F;&#x7684;&#x8FDB;&#x7A0B;&#x6302;&#x6389;&#xFF0C;&#x52A0;&#x5165;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x6D88;&#x606F;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x5728;&#x7CFB;&#x7EDF;&#x6062;&#x590D;&#x540E;&#x88AB;&#x5904;&#x7406;&#x3002;</p>
<p><strong>&#x987A;&#x5E8F;&#x4FDD;&#x8BC1;</strong>
&#x5728;&#x5927;&#x591A;&#x4F7F;&#x7528;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x6570;&#x636E;&#x5904;&#x7406;&#x7684;&#x987A;&#x5E8F;&#x90FD;&#x5F88;&#x91CD;&#x8981;&#x3002;&#x5927;&#x90E8;&#x5206;&#x6D88;&#x606F;&#x961F;&#x5217;&#x672C;&#x6765;&#x5C31;&#x662F;&#x6392;&#x5E8F;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x80FD;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x4F1A;&#x6309;&#x7167;&#x7279;&#x5B9A;&#x7684;&#x987A;&#x5E8F;&#x6765;&#x5904;&#x7406;&#x3002;&#xFF08;Kafka &#x4FDD;&#x8BC1;&#x4E00;&#x4E2A; Partition &#x5185;&#x7684;&#x6D88;&#x606F;&#x7684;&#x6709;&#x5E8F;&#x6027;&#xFF09;</p>
<ul>
<li>&#x5206;&#x533A;&#x3001;&#x591A;&#x7EBF;&#x7A0B;&#x3001;&#x9884;&#x8BFB;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x6D88;&#x606F;&#x65E0;&#x5E8F;</li>
</ul>
<p><strong>&#x7F13;&#x51B2;</strong>
&#x6709;&#x52A9;&#x4E8E;&#x63A7;&#x5236;&#x548C;&#x4F18;&#x5316;&#x6570;&#x636E;&#x6D41;&#x7ECF;&#x8FC7;&#x7CFB;&#x7EDF;&#x7684;&#x901F;&#x5EA6;&#xFF0C;&#x89E3;&#x51B3;&#x751F;&#x4EA7;&#x6D88;&#x606F;&#x548C;&#x6D88;&#x8D39;&#x6D88;&#x606F;&#x7684;&#x5904;&#x7406;&#x901F;&#x5EA6;&#x4E0D;&#x4E00;&#x81F4;&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<p><strong>&#x5F02;&#x6B65;&#x901A;&#x4FE1;</strong>
&#x5F88;&#x591A;&#x65F6;&#x5019;&#xFF0C;&#x7528;&#x6237;&#x4E0D;&#x60F3;&#x4E5F;&#x4E0D;&#x9700;&#x8981;&#x7ACB;&#x5373;&#x5904;&#x7406;&#x6D88;&#x606F;&#x3002;&#x6D88;&#x606F;&#x961F;&#x5217;&#x63D0;&#x4F9B;&#x4E86;<font color="red">&#x5F02;&#x6B65;&#x5904;&#x7406;</font>&#x673A;&#x5236;&#xFF0C;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x628A;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x653E;&#x5165;&#x961F;&#x5217;&#xFF0C;&#x4F46;&#x5E76;&#x4E0D;&#x7ACB;&#x5373;&#x5904;&#x7406;&#x5B83;&#x3002;&#x60F3;&#x5411;&#x961F;&#x5217;&#x4E2D;&#x653E;&#x5165;&#x591A;&#x5C11;&#x6D88;&#x606F;&#x5C31;&#x653E;&#x591A;&#x5C11;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x9700;&#x8981;&#x7684;&#x65F6;&#x5019;&#x518D;&#x53BB;&#x5904;&#x7406;&#x5B83;&#x4EEC;&#x3002;&#x5F02;&#x6B65;&#x901A;&#x4FE1;&#xFF0C;&#x51CF;&#x5C11;&#x7EBF;&#x7A0B;&#x7B49;&#x5F85;&#xFF0C;&#x7279;&#x522B;&#x662F;&#x5904;&#x7406;&#x6279;&#x91CF;&#x7B49;&#x5927;&#x4E8B;&#x52A1;&#x3001;&#x8017;&#x65F6;&#x64CD;&#x4F5C;&#x3002; </p>
<h2 id="&#x6838;&#x5FC3;&#x6982;&#x5FF5;"><a name="&#x6838;&#x5FC3;&#x6982;&#x5FF5;" class="anchor-navigation-ex-anchor" href="#&#x6838;&#x5FC3;&#x6982;&#x5FF5;"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. &#x6838;&#x5FC3;&#x6982;&#x5FF5;</h2>
<p>Kafka&#x6700;&#x521D;&#x7531;Linkedin&#x516C;&#x53F8;&#x5F00;&#x53D1;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;<strong>&#x5206;&#x5E03;&#x5F0F;</strong>&#x3001;<strong>&#x5206;&#x533A;&#x7684;</strong>&#x3001;<strong>&#x591A;&#x526F;&#x672C;&#x7684;</strong>&#x3001;<strong>&#x591A;&#x8BA2;&#x9605;&#x8005;</strong>&#xFF0C;<strong>&#x57FA;&#x4E8E;zookeeper&#x534F;&#x8C03;</strong>&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x65E5;&#x5FD7;&#x7CFB;&#x7EDF;&#xFF08;&#x4E5F;&#x53EF;&#x4EE5;&#x5F53;&#x505A;MQ&#x7CFB;&#x7EDF;&#xFF09;&#xFF0C;&#x5E38;&#x89C1;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;web/nginx&#x65E5;&#x5FD7;&#x3001;&#x8BBF;&#x95EE;&#x65E5;&#x5FD7;&#xFF0C;&#x6D88;&#x606F;&#x670D;&#x52A1;&#x7B49;&#x7B49;&#xFF0C;Linkedin&#x4E8E;2010&#x5E74;&#x8D21;&#x732E;&#x7ED9;&#x4E86;Apache&#x57FA;&#x91D1;&#x4F1A;&#x5E76;&#x6210;&#x4E3A;&#x9876;&#x7EA7;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#x3002;</p>
<p>kafka&#x662F;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x6D88;&#x606F;&#x961F;&#x5217;&#x3002;&#x5177;&#x6709;&#x9AD8;&#x6027;&#x80FD;&#x3001;&#x6301;&#x4E45;&#x5316;&#x3001;&#x591A;&#x526F;&#x672C;&#x5907;&#x4EFD;&#x3001;&#x6A2A;&#x5411;&#x6269;&#x5C55;&#x80FD;&#x529B;&#x3002;&#x751F;&#x4EA7;&#x8005;&#x5F80;&#x961F;&#x5217;&#x91CC;&#x5199;&#x6D88;&#x606F;&#xFF0C;&#x6D88;&#x8D39;&#x8005;&#x4ECE;&#x961F;&#x5217;&#x91CC;&#x53D6;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x3002;Kafka&#x5C31;&#x662F;&#x4E00;&#x79CD;<font color="red">&#x53D1;&#x5E03;-&#x8BA2;&#x9605;&#x6A21;&#x5F0F;</font>&#x3002;&#x5C06;&#x6D88;&#x606F;&#x4FDD;&#x5B58;&#x5728;&#x78C1;&#x76D8;&#x4E2D;&#xFF0C;&#x4EE5;&#x987A;&#x5E8F;&#x8BFB;&#x5199;&#x65B9;&#x5F0F;&#x8BBF;&#x95EE;&#x78C1;&#x76D8;&#xFF0C;&#x907F;&#x514D;&#x968F;&#x673A;&#x8BFB;&#x5199;&#x5BFC;&#x81F4;&#x6027;&#x80FD;&#x74F6;&#x9888;&#x3002;</p>
<h2 id="&#x7279;&#x6027;"><a name="&#x7279;&#x6027;" class="anchor-navigation-ex-anchor" href="#&#x7279;&#x6027;"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. &#x7279;&#x6027;</h2>
<ul>
<li><p>&#x9AD8;&#x541E;&#x5410;&#x3001;&#x4F4E;&#x5EF6;&#x8FDF;</p>
<p>kakfa &#x6700;&#x5927;&#x7684;&#x7279;&#x70B9;&#x5C31;&#x662F;&#x6536;&#x53D1;&#x6D88;&#x606F;&#x975E;&#x5E38;&#x5FEB;&#xFF0C;kafka &#x6BCF;&#x79D2;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x51E0;&#x5341;&#x4E07;&#x6761;&#x6D88;&#x606F;&#xFF0C;&#x5B83;&#x7684;&#x6700;&#x4F4E;&#x5EF6;&#x8FDF;&#x53EA;&#x6709;&#x51E0;&#x6BEB;&#x79D2;&#x3002;</p>
</li>
<li><p>&#x9AD8;&#x4F38;&#x7F29;&#x6027;</p>
<p>&#x6BCF;&#x4E2A;&#x4E3B;&#x9898;&#xFF08;topic&#xFF09;&#x5305;&#x542B;&#x591A;&#x4E2A;&#x5206;&#x533A;&#xFF08;partition&#xFF09;&#xFF0C;&#x4E3B;&#x9898;&#x4E2D;&#x7684;&#x5206;&#x533A;&#x53EF;&#x4EE5;&#x5206;&#x5E03;&#x5728;&#x4E0D;&#x540C;&#x7684;&#x4E3B;&#x673A;&#xFF08;broker&#xFF09;&#x4E2D;&#x3002;</p>
</li>
<li><p>&#x6301;&#x4E45;&#x6027;&#x3001;&#x53EF;&#x9760;&#x6027;</p>
<p>Kafka &#x80FD;&#x591F;&#x5141;&#x8BB8;&#x6570;&#x636E;&#x7684;&#x6301;&#x4E45;&#x5316;&#x5B58;&#x50A8;&#xFF0C;&#x6D88;&#x606F;&#x88AB;&#x6301;&#x4E45;&#x5316;&#x5230;&#x78C1;&#x76D8;&#xFF0C;&#x5E76;&#x652F;&#x6301;&#x6570;&#x636E;&#x5907;&#x4EFD;&#x9632;&#x6B62;&#x6570;&#x636E;&#x4E22;&#x5931;&#x3002;</p>
</li>
<li><p>&#x5BB9;&#x9519;&#x6027;</p>
<p>&#x5141;&#x8BB8;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x8282;&#x70B9;&#x5931;&#x8D25;&#xFF0C;&#x67D0;&#x4E2A;&#x8282;&#x70B9;&#x5B95;&#x673A;&#xFF0C;Kafka &#x96C6;&#x7FA4;&#x80FD;&#x591F;&#x6B63;&#x5E38;&#x5DE5;&#x4F5C;&#x3002;</p>
</li>
<li><p>&#x9AD8;&#x5E76;&#x53D1;</p>
<p>&#x652F;&#x6301;&#x6570;&#x5343;&#x4E2A;&#x5BA2;&#x6237;&#x7AEF;&#x540C;&#x65F6;&#x8BFB;&#x5199;&#x3002;</p>
</li>
</ul>
<h2 id="&#x6D88;&#x606F;&#x5904;&#x7406;&#x6A21;&#x5F0F;"><a name="&#x6D88;&#x606F;&#x5904;&#x7406;&#x6A21;&#x5F0F;" class="anchor-navigation-ex-anchor" href="#&#x6D88;&#x606F;&#x5904;&#x7406;&#x6A21;&#x5F0F;"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. &#x6D88;&#x606F;&#x5904;&#x7406;&#x6A21;&#x5F0F;</h2>
<ul>
<li>&#x70B9;&#x5BF9;&#x70B9;&#xFF1A;PTP&#xFF0C;Point-To-Point &#x5BF9;&#x5E94;&#x4E8E; Queue&#xFF0C;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x6D88;&#x8D39;&#x8005;</li>
<li>&#x53D1;&#x5E03;&#x8BA2;&#x9605;&#xFF1A;PubSub&#xFF0C;Publish-Subscribe &#x5BF9;&#x5E94;&#x4E8E; Topic&#xFF0C;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x5BF9;&#x5E94;&#x591A;&#x4E2A;&#x6D88;&#x8D39;&#x8005;</li>
</ul>
<h2 id="&#x6D88;&#x606F;&#x5904;&#x7406;&#x7684;&#x4FDD;&#x969C;"><a name="&#x6D88;&#x606F;&#x5904;&#x7406;&#x7684;&#x4FDD;&#x969C;" class="anchor-navigation-ex-anchor" href="#&#x6D88;&#x606F;&#x5904;&#x7406;&#x7684;&#x4FDD;&#x969C;"><i class="fa fa-link" aria-hidden="true"></i></a>1.5. &#x6D88;&#x606F;&#x5904;&#x7406;&#x7684;&#x4FDD;&#x969C;</h2>
<p>&#x4E09;&#x79CD;QoS&#xFF0C;<font color="red">&#x5E73;&#x8861;&#x53EF;&#x9760;&#x6027;&#x548C;&#x6027;&#x80FD;</font></p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x8FD9;&#x662F;&#x6D88;&#x606F;&#x8BED;&#x4E49;&#x7684;&#xFF0C;&#x4E0D;&#x662F;&#x4E1A;&#x52A1;&#x8BED;&#x4E49;&#x7684;</p>
<ul>
<li><p>At most once&#xFF08;0-1&#xFF09;&#xFF0C;&#x81F3;&#x591A;&#x4E00;&#x6B21;&#xFF0C;&#x6D88;&#x606F;&#x53EF;&#x80FD;&#x4E22;&#x5931;&#x4F46;&#x662F;&#x4E0D;&#x4F1A;&#x91CD;&#x590D;&#x53D1;&#x9001;</p>
</li>
<li><p>At least once&#xFF08;1-<em>&#xFF09;&#xFF0C;&#x81F3;&#x5C11;&#x4E00;&#x6B21;&#xFF0C;<em>*&#x6D88;&#x606F;&#x4E0D;&#x4F1A;&#x4E22;&#x5931;</em></em>&#xFF0C;&#x4F46;&#x662F;&#x53EF;&#x80FD;&#x4F1A;&#x91CD;&#x590D;</p>
<ul>
<li>&#x5EFA;&#x8BAE;&#x4F7F;&#x7528;&#x6B64;&#x79CD;&#x7B56;&#x7565;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x4E1A;&#x52A1;&#x5C42;&#x9762;&#x4FDD;&#x8BC1;&#x6D88;&#x606F;&#x7684;&#x552F;&#x4E00;&#x6027;&#xFF0C;&#x5982;&#xFF1A;&#x5E42;&#x7B49;&#xFF0C;&#x53BB;&#x91CD;&#xFF08;RoaringBitmap&#xFF09;</li>
</ul>
</li>
<li><p>Exactly once&#xFF08;1&#xFF09;&#xFF0C;&#x7CBE;&#x786E;&#x4E00;&#x6B21;&#xFF0C;&#x6BCF;&#x6761;&#x6D88;&#x606F;&#x80AF;&#x5B9A;&#x4F1A;&#x88AB;&#x4F20;&#x8F93;&#x4E00;&#x6B21;&#x4E14;&#x4EC5;&#x4E00;&#x6B21;</p>
</li>
</ul>
<p>&#x6D88;&#x606F;&#x5904;&#x7406;&#x7684;&#x4E8B;&#x52A1;&#x6027;</p>
<ul>
<li><p>&#x901A;&#x8FC7;&#x786E;&#x8BA4;&#x673A;&#x5236;&#x5B9E;&#x73B0;&#x4E8B;&#x52A1;&#x6027;</p>
</li>
<li><p>&#x53EF;&#x4EE5;&#x88AB;&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#x5668;&#x7BA1;&#x7406;&#xFF0C;&#x751A;&#x81F3;&#x53EF;&#x4EE5;&#x652F;&#x6301;XA</p>
</li>
</ul>
<h2 id="&#x6D88;&#x606F;&#x534F;&#x8BAE;"><a name="&#x6D88;&#x606F;&#x534F;&#x8BAE;" class="anchor-navigation-ex-anchor" href="#&#x6D88;&#x606F;&#x534F;&#x8BAE;"><i class="fa fa-link" aria-hidden="true"></i></a>1.6. &#x6D88;&#x606F;&#x534F;&#x8BAE;</h2>
<h3 id="stomp"><a name="stomp" class="anchor-navigation-ex-anchor" href="#stomp"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.1. STOMP</h3>
<p>&#x9762;&#x5411;&#x6D41;&#x6587;&#x672C;&#x7684;&#x6D88;&#x606F;&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#xFF08;STOMP&#xFF0C;Streaming Text Oriented Messaging Protocol&#xFF09;&#xFF0C;&#x662F; WebSocket &#x901A;&#x4FE1;&#x6807;&#x51C6;&#x3002;&#x5728;&#x901A;&#x5E38;&#x7684;&#x53D1;&#x5E03;&#xFF0D;&#x8BA2;&#x9605;&#x8BED;&#x4E49;&#x4E4B;&#x4E0A;&#xFF0C;&#x5B83;&#x901A;&#x8FC7; begin/publish/commit &#x5E8F;&#x5217;&#x4EE5;&#x53CA; acknowledgement &#x673A;&#x5236;&#x6765;&#x63D0;&#x4F9B;&#x6D88;&#x606F;&#x53EF;&#x9760;&#x6295;&#x9012;&#x3002;</p>
<p>&#x7531;&#x4E8E;&#x534F;&#x8BAE;&#x7B80;&#x5355;&#x4E14;&#x6613;&#x4E8E;&#x5B9E;&#x73B0;&#xFF0C;&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x7684;&#x7F16;&#x7A0B;&#x8BED;&#x8A00;&#x90FD;&#x6709; STOMP &#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x5B9E;&#x73B0;&#x3002;&#x4F46;&#x662F;&#x5728;&#x6D88;&#x606F;&#x5927;&#x5C0F;&#x548C;&#x5904;&#x7406;&#x901F;&#x5EA6;&#x65B9;&#x9762;&#x5E76;&#x65E0;&#x4F18;&#x52BF;&#x3002;</p>
<h3 id="jms"><a name="jms" class="anchor-navigation-ex-anchor" href="#jms"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.2. JMS</h3>
<p>Java &#x6D88;&#x606F;&#x670D;&#x52A1;&#xFF08;JMS&#xFF0C;Java Messaging Service&#xFF09;&#xFF0C;&#x662F;&#x534F;&#x8BAE;&#x540C;&#x65F6;&#x4E5F;&#x662F; Java &#x6D88;&#x606F;&#x670D;&#x52A1;&#x89C4;&#x8303;&#x7684;&#x6807;&#x51C6;&#x5B9E;&#x73B0;&#xFF0C;&#x540C;&#x65F6;&#x4E5F;&#x662F; Java &#x4F01;&#x4E1A;&#x7248;&#xFF08;J2EE&#xFF09;&#x89C4;&#x8303;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;</p>
<h3 id="amqp"><a name="amqp" class="anchor-navigation-ex-anchor" href="#amqp"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.3. AMQP</h3>
<p>&#x9AD8;&#x7EA7;&#x6D88;&#x606F;&#x961F;&#x5217;&#x534F;&#x8BAE;&#xFF08;AMQP&#xFF0C;Advanced Message Queuing Protocol&#xFF09;&#x662F;&#x5404;&#x79CD;&#x6D88;&#x606F;&#x961F;&#x5217;&#x534F;&#x8BAE;&#x4E2D;&#x7684;&#x4F7C;&#x4F7C;&#x8005;&#x3002;RabbitMQ &#x548C; HornetQ &#x90FD;&#x662F;&#x5B9E;&#x73B0;&#x8BE5;&#x534F;&#x8BAE;&#x7684;&#x6D41;&#x884C;&#x4E2D;&#x95F4;&#x4EF6;&#x3002;</p>
<h3 id="mqtt"><a name="mqtt" class="anchor-navigation-ex-anchor" href="#mqtt"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.4. MQTT</h3>
<p>MQTT&#xFF08;Message Queue Telemetry Transport&#xFF09;&#x662F;&#x4E00;&#x79CD;&#x4E8C;&#x8FDB;&#x5236;&#x534F;&#x8BAE;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x670D;&#x52A1;&#x5668;&#x548C;&#x90A3;&#x4E9B;&#x4F4E;&#x529F;&#x8017;&#x7684;&#x7269;&#x8054;&#x7F51;&#x8BBE;&#x5907;&#xFF08;IoT&#xFF09;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x3002;</p>
<p>&#x5B83;&#x4F4D;&#x4E8E; TCP &#x534F;&#x8BAE;&#x7684;&#x4E0A;&#x5C42;&#xFF0C;&#x9664;&#x4E86;&#x63D0;&#x4F9B;&#x53D1;&#x5E03;&#xFF0D;&#x8BA2;&#x9605;&#x8FD9;&#x4E00;&#x57FA;&#x672C;&#x529F;&#x80FD;&#x5916;&#xFF0C;&#x4E5F;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x5176;&#x5B83;&#x7279;&#x6027;&#xFF1A;&#x4E0D;&#x540C;&#x7684;&#x6D88;&#x606F;&#x6295;&#x9012;&#x4FDD;&#x969C;&#xFF08;delivery guarantee&#xFF09;&#xFF0C;&#x201C;&#x81F3;&#x5C11;&#x4E00;&#x6B21;&#x201D;&#x548C;&#x201C;&#x6700;&#x591A;&#x4E00;&#x6B21;&#x201D;&#x3002;&#x901A;&#x8FC7;&#x5B58;&#x50A8;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x88AB;&#x786E;&#x8BA4;&#x63A5;&#x53D7;&#x7684;&#x6D88;&#x606F;&#x6765;&#x5B9E;&#x73B0;&#x91CD;&#x8FDE;&#x540E;&#x7684;&#x6D88;&#x606F;&#x6062;&#x590D;&#x3002;&#x5B83;&#x975E;&#x5E38;&#x8F7B;&#x91CF;&#x7EA7;&#xFF0C;&#x5E76;&#x4E14;&#x4ECE;&#x8BBE;&#x8BA1;&#x548C;&#x5B9E;&#x73B0;&#x5C42;&#x9762;&#x90FD;&#x9002;&#x5408;&#x7528;&#x4E8E;&#x4E0D;&#x7A33;&#x5B9A;&#x7684;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#x4E2D;&#x3002;</p>
<h2 id="&#x6D88;&#x606F;&#x961F;&#x5217;&#x7684;&#x901A;&#x7528;&#x7ED3;&#x6784;"><a name="&#x6D88;&#x606F;&#x961F;&#x5217;&#x7684;&#x901A;&#x7528;&#x7ED3;&#x6784;" class="anchor-navigation-ex-anchor" href="#&#x6D88;&#x606F;&#x961F;&#x5217;&#x7684;&#x901A;&#x7528;&#x7ED3;&#x6784;"><i class="fa fa-link" aria-hidden="true"></i></a>1.7. &#x6D88;&#x606F;&#x961F;&#x5217;&#x7684;&#x901A;&#x7528;&#x7ED3;&#x6784;</h2>
<ul>
<li>&#x5BA2;&#x6237;&#x7AEF;&#x5E94;&#x7528;&#x5C42;&#xFF1A;&#x53D1;&#x9001;&#x548C;&#x63A5;&#x6536;&#x6D88;&#x606F;&#x7684;API</li>
<li>&#x6D88;&#x606F;&#x6A21;&#x578B;&#x5C42;&#xFF1A;&#x6D88;&#x606F;&#x3001;&#x8FDE;&#x63A5;&#x3001;&#x4F1A;&#x8BDD;&#x3001;&#x4E8B;&#x52A1;&#x7B49;</li>
<li>&#x6D88;&#x606F;&#x5904;&#x7406;&#x5C42;&#xFF1A;&#x6D88;&#x606F;&#x4EA4;&#x4E92;&#x903B;&#x8F91;&#x5B9A;&#x4E49;&#x3001;&#x6301;&#x4E45;&#x5316;</li>
<li>&#x7F51;&#x7EDC;&#x4F20;&#x8F93;&#x5C42;&#xFF1A;&#x5E8F;&#x5217;&#x5316;&#x534F;&#x8BAE;&#x3001;&#x4F20;&#x8F93;&#x534F;&#x8BAE;&#x3001;&#x53EF;&#x9760;&#x673A;&#x5236;</li>
<li>&#x5B89;&#x5168;&#x5C42;</li>
<li>&#x7BA1;&#x7406;&#x5C42;</li>
</ul>
<h1 id="kafka&#x6838;&#x5FC3;&#x539F;&#x7406;"><a name="kafka&#x6838;&#x5FC3;&#x539F;&#x7406;" class="anchor-navigation-ex-anchor" href="#kafka&#x6838;&#x5FC3;&#x539F;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>2. Kafka&#x6838;&#x5FC3;&#x539F;&#x7406;</h1>
<h2 id="&#x96C6;&#x7FA4;&#x67B6;&#x6784;"><a name="&#x96C6;&#x7FA4;&#x67B6;&#x6784;" class="anchor-navigation-ex-anchor" href="#&#x96C6;&#x7FA4;&#x67B6;&#x6784;"><i class="fa fa-link" aria-hidden="true"></i></a>2.1. &#x96C6;&#x7FA4;&#x67B6;&#x6784;</h2>
<p><img src="Kafka&#x5206;&#x5E03;&#x5F0F;&#x6D88;&#x606F;&#x6D41;&#x5E73;&#x53F0;.assets/kafka_overall_structure.png" alt="kafka_overall_structure"></p>
<ul>
<li><p>producer</p>
<p>&#x6D88;&#x606F;&#x751F;&#x4EA7;&#x8005;&#xFF0C;&#x53D1;&#x5E03;&#x6D88;&#x606F;&#x5230;Kafka&#x96C6;&#x7FA4;&#x7684;&#x7EC8;&#x7AEF;&#x6216;&#x670D;&#x52A1;&#x3002;</p>
</li>
<li><p>consumer</p>
<p>&#x4ECE;Kafka&#x96C6;&#x7FA4;&#x4E2D;&#x6D88;&#x8D39;&#x6D88;&#x606F;&#x7684;&#x7EC8;&#x7AEF;&#x6216;&#x670D;&#x52A1;&#x3002;</p>
</li>
<li><p>consumer group</p>
<ul>
<li>&#x6BCF;&#x4E2A; consumer &#x90FD;&#x5C5E;&#x4E8E;&#x4E00;&#x4E2A; consumer group&#x3002;</li>
<li>&#x6BCF;&#x6761;&#x6D88;&#x606F;&#x53EA;&#x80FD;&#x88AB; consumer group &#x4E2D;&#x7684;&#x4E00;&#x4E2A; Consumer &#x6D88;&#x8D39;&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x88AB;&#x591A;&#x4E2A; consumer group &#x4E2D;&#x7684; consumer&#x6D88;&#x8D39;&#x3002;</li>
<li>&#x7EC4;&#x5185;&#x76F8;&#x5F53;&#x4E8E;queue&#xFF0C;&#x7EC4;&#x95F4;&#x76F8;&#x5F53;&#x4E8E;topic</li>
</ul>
</li>
<li><p>broker</p>
<p>Kafka&#x96C6;&#x7FA4;&#x4E2D;&#x5305;&#x542B;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x4E00;&#x4E2A;broker&#x5C31;&#x8868;&#x793A;kafka&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x3002;</p>
</li>
<li><p>topic</p>
<ul>
<li>&#x6BCF;&#x6761;&#x53D1;&#x5E03;&#x5230;Kafka&#x96C6;&#x7FA4;&#x7684;&#x6D88;&#x606F;&#x5C5E;&#x4E8E;&#x7684;&#x7C7B;&#x522B;&#xFF0C;&#x5373;Kafka&#x662F;&#x9762;&#x5411; topic &#x7684;&#x3002;&#x66F4;&#x901A;&#x4FD7;&#x7684;&#x8BF4;Topic&#x5C31;&#x50CF;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x961F;&#x5217;&#xFF0C;&#x751F;&#x4EA7;&#x8005;&#x53EF;&#x4EE5;&#x5411;&#x5176;&#x5199;&#x5165;&#x6D88;&#x606F;&#xFF0C;&#x6D88;&#x8D39;&#x8005;&#x53EF;&#x4EE5;&#x4ECE;&#x4E2D;&#x8BFB;&#x53D6;&#x6D88;&#x606F;&#xFF0C;&#x4E00;&#x4E2A;Topic&#x652F;&#x6301;&#x591A;&#x4E2A;&#x751F;&#x4EA7;&#x8005;&#x6216;&#x6D88;&#x8D39;&#x8005;&#x540C;&#x65F6;&#x8BA2;&#x9605;&#x5B83;&#xFF0C;&#x6240;&#x4EE5;&#x5176;&#x6269;&#x5C55;&#x6027;&#x5F88;&#x597D;&#x3002;</li>
<li>&#x6BCF;&#x6761;&#x6D88;&#x606F;&#x90FD;&#x8981;&#x6307;&#x5B9A;&#x4E00;&#x4E2A;topic&#x3002;</li>
<li><font color="red">&#x903B;&#x8F91;&#x6982;&#x5FF5;</font>
</li>
</ul>
</li>
<li><p>partition</p>
<ul>
<li>&#x6BCF;&#x4E2A; topic &#x5305;&#x542B;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;partition&#x3002;Kafka&#x5206;&#x914D;&#x7684;&#x5355;&#x4F4D;&#x662F;partition&#x3002;</li>
<li><font color="red">&#x7269;&#x7406;&#x6982;&#x5FF5;</font>&#xFF0C;&#x6BCF;&#x4E2A;topic&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;partition&#xFF0C;&#x4E00;&#x4E2A;partition&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#xFF0C;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#x4E0B;&#x5B58;&#x50A8;partition&#x7684;&#x6570;&#x636E;&#x548C;&#x7D22;&#x5F15;&#x6587;&#x4EF6;&#xFF0C;&#x6BCF;&#x4E2A;partition&#x5185;&#x90E8;&#x662F;&#x6709;&#x5E8F;&#x7684;&#x3002;</li>
<li>&#x6D88;&#x8D39;&#x8005;&#x7EC4;&#x7684;&#x4E0D;&#x540C;&#x6D88;&#x8D39;&#x8005;&#x4E0D;&#x5141;&#x8BB8;&#x6D88;&#x8D39;&#x540C;&#x4E00;&#x4E2A;partition&#x3002;</li>
<li>&#x6BCF;&#x6761;&#x6D88;&#x606F;&#x53EF;&#x88AB;&#x4E0D;&#x540C;&#x7684;&#x6D88;&#x8D39;&#x8005;&#x7EC4;&#x6D88;&#x8D39;&#xFF0C;&#x4F46;&#x53EA;&#x53EF;&#x88AB;&#x6D88;&#x8D39;&#x8005;&#x7EC4;&#x7684;&#x4E00;&#x4E2A;&#x6D88;&#x8D39;&#x8005;&#x6D88;&#x8D39;&#x3002;</li>
<li>&#x5982;&#x679C; <code>&#x6D88;&#x8D39;&#x8005;&#x6570; &gt; partition</code> &#xFF0C;&#x5219;&#x591A;&#x4F59;&#x7684;&#x7A7A;&#x95F2;&#xFF1B;&#x5982;&#x679C; <code>&#x6D88;&#x8D39;&#x8005;&#x6570; &lt; partition</code>&#xFF0C;&#x5219;&#x4F1A;&#x6709;&#x6D88;&#x8D39;&#x8005;&#x6D88;&#x8D39;&#x591A;&#x4E2A;partition&#x3002;</li>
<li>&#x76EE;&#x7684;&#x662F;&#x5C06;&#x903B;&#x8F91;topic&#x6253;&#x6563;&#xFF0C;&#x63D0;&#x9AD8;&#x5E76;&#x53D1;&#x6027;</li>
<li>&#x5355;&#x673A;&#x4E0D;&#x5EFA;&#x8BAE;&#x5927;&#x91CF;topic/partition&#xFF0C;&#x5355;&#x4E2A;partition&#x987A;&#x5E8F;&#x5199;&#xFF0C;&#x591A;&#x4E2A;partition&#x5E76;&#x53D1;&#x5199;&#xFF0C;&#x4F1A;&#x9020;&#x6210;&#x78C1;&#x76D8;&#x968F;&#x673A;&#x8BFB;&#x5199;</li>
</ul>
</li>
<li><p>replica</p>
<p><font color="red">partition&#x7684;&#x526F;&#x672C;&#xFF0C;&#x4FDD;&#x969C; partition &#x7684;&#x9AD8;&#x53EF;&#x7528;</font>&#x3002;&#x6240;&#x8C13;&#x526F;&#x672C;&#xFF08;Replica&#xFF09;&#xFF0C;&#x672C;&#x8D28;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x53EA;&#x80FD;&#x8FFD;&#x52A0;&#x5199;&#x6D88;&#x606F;&#x7684;&#x63D0;&#x4EA4;&#x65E5;&#x5FD7;&#x3002;&#x6839;&#x636E; Kafka &#x526F;&#x672C;&#x673A;&#x5236;&#x7684;&#x5B9A;&#x4E49;&#xFF0C;&#x540C;&#x4E00;&#x4E2A;&#x5206;&#x533A;&#x4E0B;&#x7684;&#x6240;&#x6709;&#x526F;&#x672C;&#x4FDD;&#x5B58;&#x6709;&#x76F8;&#x540C;&#x7684;&#x6D88;&#x606F;&#x5E8F;&#x5217;&#xFF0C;&#x8FD9;&#x4E9B;&#x526F;&#x672C;&#x5206;&#x6563;&#x4FDD;&#x5B58;&#x5728;&#x4E0D;&#x540C;&#x7684; Broker &#x4E0A;&#xFF0C;&#x4ECE;&#x800C;&#x80FD;&#x591F;&#x5BF9;&#x6297;&#x90E8;&#x5206; Broker &#x5B95;&#x673A;&#x5E26;&#x6765;&#x7684;&#x6570;&#x636E;&#x4E0D;&#x53EF;&#x7528;&#x3002;&#x5176;&#x4E2D;&#x5305;&#x542B;leader&#x526F;&#x672C;&#x548C;follower&#x526F;&#x672C;&#x3002;</p>
</li>
<li><p>leader</p>
<p>&#x6BCF;&#x4E2A;partition&#x6709;&#x591A;&#x4E2A;&#x526F;&#x672C;&#xFF0C;&#x5176;&#x4E2D;&#x6709;&#x4E14;&#x4EC5;&#x6709;&#x4E00;&#x4E2A;&#x4F5C;&#x4E3A;Leader&#xFF0C;Leader&#x662F;&#x5F53;&#x524D;&#x8D1F;&#x8D23;&#x6570;&#x636E;&#x7684;&#x8BFB;&#x5199;&#x7684;partition&#x3002;producer &#x548C; consumer &#x53EA;&#x8DDF; leader &#x4EA4;&#x4E92;&#x3002;</p>
</li>
<li><p>follower</p>
<p>Follower&#x8DDF;&#x968F;Leader&#xFF0C;&#x6240;&#x6709;&#x5199;&#x8BF7;&#x6C42;&#x90FD;&#x901A;&#x8FC7;Leader&#x8DEF;&#x7531;&#xFF0C;&#x6570;&#x636E;&#x53D8;&#x66F4;&#x4F1A;&#x5E7F;&#x64AD;&#x7ED9;&#x6240;&#x6709;Follower&#xFF0C;Follower&#x4E0E;Leader&#x4FDD;&#x6301;&#x6570;&#x636E;&#x540C;&#x6B65;&#x3002;&#x5982;&#x679C;Leader&#x5931;&#x6548;&#xFF0C;&#x5219;&#x4ECE;Follower&#x4E2D;&#x9009;&#x4E3E;&#x51FA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;Leader&#x3002;</p>
</li>
<li><p>controller</p>
<ul>
<li>&#x96C6;&#x7FA4;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;broker&#x5411;ZooKeeper&#x6CE8;&#x518C;&#x5E76;&#x9009;&#x4E3E;&#x51FA;&#x4E00;&#x4E2A;controller&#x3002;</li>
<li>controller&#x8D1F;&#x8D23;Leader Partition&#x7684;&#x9009;&#x4E3E;&#x3001;&#x611F;&#x77E5;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x5176;&#x4ED6;broker&#x3001;&#x7BA1;&#x7406;&#x96C6;&#x7FA4;&#x4E2D;&#x7684;&#x5143;&#x6570;&#x636E;&#x3002;</li>
</ul>
</li>
<li><p>zookeeper</p>
<ul>
<li>Kafka &#x901A;&#x8FC7; zookeeper &#x6765;&#x5B58;&#x50A8;&#x96C6;&#x7FA4;&#x7684;meta&#x5143;&#x6570;&#x636E;&#x4FE1;&#x606F;&#x3002;</li>
<li>&#x4E00;&#x65E6;controller&#x6240;&#x5728;broker&#x5B95;&#x673A;&#xFF0C;&#x6B64;&#x65F6;&#x4E34;&#x65F6;&#x8282;&#x70B9;&#x6D88;&#x5931;&#xFF0C;&#x96C6;&#x7FA4;&#x91CC;&#x5176;&#x4ED6;broker&#x4F1A;&#x4E00;&#x76F4;&#x76D1;&#x542C;&#x8FD9;&#x4E2A;&#x4E34;&#x65F6;&#x8282;&#x70B9;&#xFF0C;&#x53D1;&#x73B0;&#x4E34;&#x65F6;&#x8282;&#x70B9;&#x6D88;&#x5931;&#x4E86;&#xFF0C;&#x5C31;&#x4E89;&#x62A2;&#x518D;&#x6B21;&#x521B;&#x5EFA;&#x4E34;&#x65F6;&#x8282;&#x70B9;&#xFF0C;&#x4FDD;&#x8BC1;&#x6709;&#x4E00;&#x53F0;&#x65B0;&#x7684;broker&#x4F1A;&#x6210;&#x4E3A;controller&#x89D2;&#x8272;&#x3002;</li>
</ul>
</li>
<li><p>offset</p>
<p>&#x6D88;&#x8D39;&#x8005;&#x5728;&#x5BF9;&#x5E94;&#x5206;&#x533A;&#x4E0A;&#x5DF2;&#x7ECF;&#x6D88;&#x8D39;&#x7684;&#x6D88;&#x606F;&#x6570;&#xFF08;&#x4F4D;&#x7F6E;&#xFF09;&#xFF0C;offset&#x4FDD;&#x5B58;&#x7684;&#x5730;&#x65B9;&#x8DDF;kafka&#x7248;&#x672C;&#x6709;&#x5173;&#x7CFB;&#x3002;</p>
<ul>
<li>kafka0.8 &#x7248;&#x672C;&#x4E4B;&#x524D;offset&#x4FDD;&#x5B58;&#x5728;zookeeper&#x4E0A;&#x3002;</li>
<li>kafka0.8 &#x7248;&#x672C;&#x4E4B;&#x540E;offset&#x4FDD;&#x5B58;&#x5728;kafka&#x96C6;&#x7FA4;&#x4E0A;&#x3002;&#x5B83;&#x662F;&#x628A;&#x6D88;&#x8D39;&#x8005;&#x6D88;&#x8D39;topic&#x7684;&#x4F4D;&#x7F6E;&#x4FDD;&#x5B58;&#x5728;kafka&#x96C6;&#x7FA4;&#x5185;&#x90E8;&#x6709;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x7684;topic&#xFF0C;&#x540D;&#x79F0;&#x53EB; __consumer_offsets&#xFF0C;&#x5B83;&#x9ED8;&#x8BA4;&#x6709;50&#x4E2A;&#x5206;&#x533A;&#x3002;</li>
</ul>
</li>
<li><p>ISR</p>
<p>replica&#x673A;&#x5236;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;Kafka&#x96C6;&#x7FA4;&#x7684;&#x9AD8;&#x53EF;&#x7528;&#xFF0C;&#x4F46;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x7684;&#x4E00;&#x81F4;&#x6027;&#xFF08;&#x4E0D;&#x4E22;&#x5931;&#xFF09;&#x3002;&#x5982;leader&#x5B95;&#x673A;&#xFF0C;&#x6B64;&#x65F6;&#x8FD8;&#x6CA1;&#x6709;&#x628A;&#x6570;&#x636E;&#x540C;&#x6B65;&#x5230;follower&#x4E0A;&#xFF0C;&#x5373;&#x4F7F;&#x9009;&#x4E3E;&#x51FA;follower&#x4F5C;&#x4E3A;&#x65B0;&#x7684;leader&#xFF0C;&#x4F46;&#x672A;&#x540C;&#x6B65;&#x7684;&#x6570;&#x636E;&#x5374;&#x4E22;&#x5931;&#x4E86;&#x3002;</p>
<p>ISR&#xFF08;in-sync replica&#xFF09;&#x5C31;&#x662F;&#x540C;leader partition&#x4FDD;&#x6301;&#x540C;&#x6B65;&#x7684;follower partition&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x53EA;&#x6709;&#x5904;&#x4E8E;ISR&#x5217;&#x8868;&#x4E2D;&#x7684;follower&#x624D;&#x53EF;&#x4EE5;&#x5728;leader&#x5B95;&#x673A;&#x4E4B;&#x540E;&#x88AB;&#x9009;&#x4E3E;&#x4E3A;&#x65B0;&#x7684;leader&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x8FD9;&#x4E2A;ISR&#x5217;&#x8868;&#x91CC;&#x4EE3;&#x8868;&#x4ED6;&#x7684;&#x6570;&#x636E;&#x540C;leader&#x662F;&#x540C;&#x6B65;&#x7684;&#x3002;</p>
</li>
</ul>
<h2 id="&#x547D;&#x4EE4;&#x884C;&#x7684;&#x7BA1;&#x7406;&#x4F7F;&#x7528;"><a name="&#x547D;&#x4EE4;&#x884C;&#x7684;&#x7BA1;&#x7406;&#x4F7F;&#x7528;" class="anchor-navigation-ex-anchor" href="#&#x547D;&#x4EE4;&#x884C;&#x7684;&#x7BA1;&#x7406;&#x4F7F;&#x7528;"><i class="fa fa-link" aria-hidden="true"></i></a>2.2. &#x547D;&#x4EE4;&#x884C;&#x7684;&#x7BA1;&#x7406;&#x4F7F;&#x7528;</h2>
<ul>
<li><p>&#x521B;&#x5EFA;topic</p>
<pre><code class="lang-shell">bin/kafka-topics.sh --create --partitions 2 --replication-factor 2 --topic test --zookeeper node01:2181,node02:2181,node03:2181
</code></pre>
</li>
<li><p>&#x67E5;&#x8BE2;topic</p>
<pre><code class="lang-shell">bin/kafka-topics.sh --list --zookeeper node01:2181,node02:2181,node03:2181
</code></pre>
</li>
<li><p>&#x67E5;&#x8BE2;topic&#x7684;&#x63CF;&#x8FF0;&#x4FE1;&#x606F;</p>
<pre><code class="lang-shell">bin/kafka-topics.sh --describe --topic test --zookeeper node01:2181,node02:2181,node03:2181
</code></pre>
</li>
<li><p>&#x5220;&#x9664;topic</p>
<pre><code class="lang-shell">bin/kafka-topics.sh --delete --topic test --zookeeper node01:2181,node02:2181,node03:2181
</code></pre>
</li>
<li><p>&#x6A21;&#x62DF;&#x751F;&#x4EA7;&#x8005;&#x5199;&#x5165;&#x6570;&#x636E;&#x5230;topic&#x4E2D;</p>
<pre><code class="lang-shell"># ctrl+c &#x9000;&#x51FA;
bin/kafka-console-producer.sh --broker-list node01:9092,node02:9092,node03:9092 --topic test
</code></pre>
</li>
<li><p>&#x6A21;&#x62DF;&#x6D88;&#x8D39;&#x8005;&#x62C9;&#x53D6;topic&#x4E2D;&#x7684;&#x6570;&#x636E;</p>
<font color="red">&#x53EF;&#x4EE5;&#x67E5;&#x770B;push&#x6570;&#x636E;&#x60C5;&#x51B5;</font>

<pre><code class="lang-shell"># offset -&gt; ZooKeeper
bin/kafka-console-consumer.sh --zookeeper node01:2181,node02:2181,node03:2181 --topic test --from-beginning

# offset -&gt; kafka broker(&#x63A8;&#x8350;)
bin/kafka-console-consumer.sh --bootstrap-server node01:9092,node02:9092,node03:9092 --topic test --from-beginning
</code></pre>
</li>
</ul>
<h2 id="&#x5206;&#x533A;&#x7B56;&#x7565;"><a name="&#x5206;&#x533A;&#x7B56;&#x7565;" class="anchor-navigation-ex-anchor" href="#&#x5206;&#x533A;&#x7B56;&#x7565;"><i class="fa fa-link" aria-hidden="true"></i></a>2.3. &#x5206;&#x533A;&#x7B56;&#x7565;</h2>
<p>kafka&#x7684;&#x5206;&#x533A;&#x7B56;&#x7565;&#x51B3;&#x5B9A;&#x4E86;producer&#x751F;&#x4EA7;&#x8005;&#x4EA7;&#x751F;&#x7684;&#x4E00;&#x6761;&#x6D88;&#x606F;&#x6700;&#x540E;&#x4F1A;&#x5199;&#x5165;&#x5230;topic&#x7684;&#x54EA;&#x4E00;&#x4E2A;&#x5206;&#x533A;&#x4E2D;&#x3002;</p>
<h3 id="&#x6307;&#x5B9A;&#x5177;&#x4F53;&#x7684;&#x5206;&#x533A;&#x53F7;"><a name="&#x6307;&#x5B9A;&#x5177;&#x4F53;&#x7684;&#x5206;&#x533A;&#x53F7;" class="anchor-navigation-ex-anchor" href="#&#x6307;&#x5B9A;&#x5177;&#x4F53;&#x7684;&#x5206;&#x533A;&#x53F7;"><i class="fa fa-link" aria-hidden="true"></i></a>2.3.1. &#x6307;&#x5B9A;&#x5177;&#x4F53;&#x7684;&#x5206;&#x533A;&#x53F7;</h3>
<pre><code class="lang-java">producer.send(<span class="hljs-keyword">new</span> ProducerRecord&lt;&gt;(UtilFactory.TOPIC_TEST, <span class="hljs-number">0</span>, String.valueOf(<span class="hljs-number">0</span>), String.valueOf(<span class="hljs-number">0</span>)));
</code></pre>
<h3 id="&#x6309;&#x7167;key&#x7684;hashcode&#xFF08;kafka&#x89C4;&#x5219;&#xFF09;&#x5206;&#x533A;"><a name="&#x6309;&#x7167;key&#x7684;hashcode&#xFF08;kafka&#x89C4;&#x5219;&#xFF09;&#x5206;&#x533A;" class="anchor-navigation-ex-anchor" href="#&#x6309;&#x7167;key&#x7684;hashcode&#xFF08;kafka&#x89C4;&#x5219;&#xFF09;&#x5206;&#x533A;"><i class="fa fa-link" aria-hidden="true"></i></a>2.3.2. &#x6309;&#x7167;key&#x7684;hashcode&#xFF08;kafka&#x89C4;&#x5219;&#xFF09;&#x5206;&#x533A;</h3>
<ul>
<li>key&#x7684;&#x4F5C;&#x7528;&#x662F;&#x4F7F;&#x6D88;&#x606F;&#x8FDB;&#x5165;&#x7279;&#x5B9A;&#x5206;&#x533A;</li>
</ul>
<pre><code class="lang-java"><span class="hljs-comment">// &#x76F8;&#x540C;key&#x5230;&#x540C;&#x4E00;&#x4E2A;&#x5206;&#x533A;</span>
<span class="hljs-comment">// &#x5206;&#x533A;=hashcode(key)%&#x5206;&#x533A;&#x6570;</span>
producer.send(<span class="hljs-keyword">new</span> ProducerRecord&lt;&gt;(UtilFactory.TOPIC_TEST, <span class="hljs-string">&quot;key-1&quot;</span>, <span class="hljs-string">&quot;rain&quot;</span>));
producer.send(<span class="hljs-keyword">new</span> ProducerRecord&lt;&gt;(UtilFactory.TOPIC_TEST, <span class="hljs-string">&quot;key-0&quot;</span>, <span class="hljs-string">&quot;yo2&quot;</span>));
producer.send(<span class="hljs-keyword">new</span> ProducerRecord&lt;&gt;(UtilFactory.TOPIC_TEST, <span class="hljs-string">&quot;key-0&quot;</span>, <span class="hljs-string">&quot;lucky&quot;</span>));
producer.send(<span class="hljs-keyword">new</span> ProducerRecord&lt;&gt;(UtilFactory.TOPIC_TEST, <span class="hljs-string">&quot;key-1&quot;</span>, <span class="hljs-string">&quot;big rice&quot;</span>));
</code></pre>
<h3 id="&#x4E0D;&#x6307;&#x5B9A;key&#x6309;&#x7167;value&#x8F6E;&#x5FAA;&#x5206;&#x533A;"><a name="&#x4E0D;&#x6307;&#x5B9A;key&#x6309;&#x7167;value&#x8F6E;&#x5FAA;&#x5206;&#x533A;" class="anchor-navigation-ex-anchor" href="#&#x4E0D;&#x6307;&#x5B9A;key&#x6309;&#x7167;value&#x8F6E;&#x5FAA;&#x5206;&#x533A;"><i class="fa fa-link" aria-hidden="true"></i></a>2.3.3. &#x4E0D;&#x6307;&#x5B9A;key&#x6309;&#x7167;value&#x8F6E;&#x5FAA;&#x5206;&#x533A;</h3>
<pre><code class="lang-java"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
    producer.send(<span class="hljs-keyword">new</span> ProducerRecord&lt;&gt;(UtilFactory.TOPIC_TEST, String.valueOf(i)));
}
</code></pre>
<h3 id="&#x81EA;&#x5B9A;&#x4E49;&#x5206;&#x533A;"><a name="&#x81EA;&#x5B9A;&#x4E49;&#x5206;&#x533A;" class="anchor-navigation-ex-anchor" href="#&#x81EA;&#x5B9A;&#x4E49;&#x5206;&#x533A;"><i class="fa fa-link" aria-hidden="true"></i></a>2.3.4. &#x81EA;&#x5B9A;&#x4E49;&#x5206;&#x533A;</h3>
<ul>
<li><p>&#x81EA;&#x5B9A;&#x4E49;&#x5206;&#x533A;&#x5B9E;&#x73B0;</p>
<p><font color="red">&#x6CE8;&#x610F;&#x6B64;&#x5904;&#x540C; <code>&#x6309;&#x7167;key&#x7684;hashcode&#xFF08;kafka&#x89C4;&#x5219;&#xFF09;&#x5206;&#x533A;</code> &#x5206;&#x533A;&#x7B56;&#x7565;&#x6709;&#x533A;&#x522B;&#xFF0C;&#x524D;&#x4E00;&#x4E2A;&#x662F;&#x9488;&#x5BF9;key&#x76F4;&#x63A5;hashcode&#x6C42;&#x4F59;&#x5206;&#x533A;&#x6570;&#x5F97;&#x5230;&#x6240;&#x5C5E;&#x5206;&#x533A;&#xFF0C;&#x540E;&#x4E00;&#x4E2A;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;&#x76F8;&#x540C;&#x7684;key&#x53BB;&#x5230;&#x540C;&#x4E00;&#x4E2A;&#x5206;&#x533A;</font>&#x3002;</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomHashPartition</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Partitioner</span> </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">partition</span><span class="hljs-params">(String topic, Object key, <span class="hljs-keyword">byte</span>[] keyBytes, Object value, <span class="hljs-keyword">byte</span>[] valueBytes, Cluster cluster)</span> </span>{
        <span class="hljs-keyword">int</span> size = cluster.partitionCountForTopic(UtilFactory.TOPIC_TEST);

        <span class="hljs-keyword">return</span> Math.abs(key.hashCode() % size);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">close</span><span class="hljs-params">()</span> </span>{

    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">configure</span><span class="hljs-params">(Map&lt;String, ?&gt; configs)</span> </span>{

    }
}
</code></pre>
</li>
<li><p>&#x6D4B;&#x8BD5;</p>
<pre><code class="lang-java">Map&lt;String, String&gt; props = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
props.put(<span class="hljs-string">&quot;partitioner.class&quot;</span>, <span class="hljs-string">&quot;com.sciatta.hadoop.kafka.example.partition.CustomHashPartition&quot;</span>);

producer = UtilFactory.getKafkaProducer(props);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
    producer.send(<span class="hljs-keyword">new</span> ProducerRecord&lt;&gt;(UtilFactory.TOPIC_TEST, String.valueOf(i), String.valueOf(i)));
}

producer.close();
</code></pre>
</li>
</ul>
<h2 id="&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x673A;&#x5236;"><a name="&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x673A;&#x5236;" class="anchor-navigation-ex-anchor" href="#&#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x673A;&#x5236;"><i class="fa fa-link" aria-hidden="true"></i></a>2.4. &#x6587;&#x4EF6;&#x5B58;&#x50A8;&#x673A;&#x5236;</h2>
<ul>
<li><p>&#x540C;&#x4E00;&#x4E2A;topic&#x4E0B;&#x6709;&#x591A;&#x4E2A;&#x4E0D;&#x540C;&#x7684;partition&#xFF0C;&#x6BCF;&#x4E2A;partition&#x4E3A;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#xFF0C;partition&#x547D;&#x540D;&#x7684;&#x89C4;&#x5219;&#x662F;topic&#x7684;&#x540D;&#x79F0;&#x52A0;&#x4E0A;&#x4E00;&#x4E2A;&#x5E8F;&#x53F7;&#xFF0C;<strong>&#x5E8F;&#x53F7;&#x4ECE;0&#x5F00;&#x59CB;</strong>&#xFF0C;&#x5982;&#xFF1A;<code>test-0</code>&#x3002;</p>
</li>
<li><p>&#x6BCF;&#x4E00;&#x4E2A;partition&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x6587;&#x4EF6;&#x88AB;&#x5E73;&#x5747;&#x5207;&#x5272;&#x6210;&#x5927;&#x5C0F;&#x76F8;&#x7B49;&#xFF08;&#x9ED8;&#x8BA4;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x662F;1G&#xFF0C;&#x53EF;&#x4EE5;&#x624B;&#x52A8;&#x53BB;&#x8BBE;&#x7F6E;&#xFF09;&#x7684;&#x6570;&#x636E;&#x6587;&#x4EF6;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x90FD;&#x88AB;&#x79F0;&#x4E3A;&#x4E00;&#x4E2A;&#x6BB5;&#xFF08;segment file&#xFF09;&#xFF0C;&#x4F46;&#x6BCF;&#x4E2A;&#x6BB5;&#x6D88;&#x606F;&#x6570;&#x91CF;&#x4E0D;&#x4E00;&#x5B9A;&#x76F8;&#x7B49;&#xFF0C;&#x8FD9;&#x79CD;&#x7279;&#x6027;&#x80FD;&#x591F;&#x4F7F;&#x5F97;&#x8001;&#x7684;segment&#x53EF;&#x4EE5;&#x88AB;&#x5FEB;&#x901F;&#x6E05;&#x9664;&#x3002;&#x9ED8;&#x8BA4;&#x4FDD;&#x7559;7&#x5929;&#x7684;&#x6570;&#x636E;&#x3002;</p>
</li>
<li>&#x6BCF;&#x6B21;&#x6EE1;1G&#x540E;&#xFF0C;&#x518D;&#x5199;&#x5165;&#x5230;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#x3002;</li>
<li>&#x6BCF;&#x4E2A;partition&#x53EA;&#x9700;&#x8981;&#x652F;&#x6301;&#x987A;&#x5E8F;&#x8BFB;&#x5199;&#x5C31;&#x53EF;&#x4EE5;&#x3002;&#x5982;&#xFF1A;00000000000000000000.log&#x662F;&#x6700;&#x65E9;&#x4EA7;&#x751F;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x8BE5;&#x6587;&#x4EF6;&#x8FBE;&#x5230;1G&#x540E;&#x53C8;&#x4EA7;&#x751F;&#x4E86;&#x65B0;&#x7684;00000000000002025849.log&#x6587;&#x4EF6;&#xFF0C;&#x65B0;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x5199;&#x5165;&#x5230;&#x8FD9;&#x4E2A;&#x65B0;&#x7684;&#x6587;&#x4EF6;&#x91CC;&#x9762;&#x3002;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5230;&#x8FBE;1G&#x540E;&#xFF0C;&#x6570;&#x636E;&#x53C8;&#x4F1A;&#x5199;&#x5165;&#x5230;&#x4E0B;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x5B83;&#x53EA;&#x4F1A;&#x5F80;&#x6587;&#x4EF6;&#x7684;&#x672B;&#x5C3E;&#x8FFD;&#x52A0;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x987A;&#x5E8F;&#x5199;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x751F;&#x4EA7;&#x8005;&#x53EA;&#x4F1A;&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;partition&#x505A;&#x6570;&#x636E;&#x7684;&#x8FFD;&#x52A0;&#xFF08;&#x5199;&#x64CD;&#x4F5C;&#xFF09;&#x3002;</li>
</ul>
<h3 id="&#x6570;&#x636E;&#x6D88;&#x8D39;&#x6709;&#x5E8F;&#x6027;&#x95EE;&#x9898;"><a name="&#x6570;&#x636E;&#x6D88;&#x8D39;&#x6709;&#x5E8F;&#x6027;&#x95EE;&#x9898;" class="anchor-navigation-ex-anchor" href="#&#x6570;&#x636E;&#x6D88;&#x8D39;&#x6709;&#x5E8F;&#x6027;&#x95EE;&#x9898;"><i class="fa fa-link" aria-hidden="true"></i></a>2.4.1. &#x6570;&#x636E;&#x6D88;&#x8D39;&#x6709;&#x5E8F;&#x6027;&#x95EE;&#x9898;</h3>
<p>&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x573A;&#x666F;&#x4E0B;&#xFF0C;&#x4E00;&#x4E2A;topic&#x4E2D;&#x5305;&#x542B;&#x591A;&#x4E2A;partition&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;partition&#x5206;&#x5E03;&#x5728;&#x4E0D;&#x540C;&#x7684;broker&#x4E0A;&#xFF0C;&#x53EA;&#x80FD;&#x505A;&#x5230;<strong>&#x6BCF;&#x4E00;&#x4E2A;partition&#x5185;&#x90E8;&#x95F4;&#x9694;&#x6709;&#x5E8F;</strong>&#xFF0C;&#x4E0D;&#x80FD;&#x505A;&#x5230;&#x5168;&#x5C40;&#x6709;&#x5E8F;&#x3002;&#x5982;&#x679C;&#x53EA;&#x6709;&#x4E00;&#x4E2A;partition&#xFF0C;&#x5F53;&#x7136;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x5168;&#x5C40;&#x6709;&#x5E8F;&#xFF0C;&#x4F46;&#x4E0E;&#x5206;&#x5E03;&#x5F0F;&#xFF0C;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x7406;&#x5FF5;&#x76F8;&#x8FDD;&#x80CC;&#x3002;</p>
<h3 id="segment&#x6587;&#x4EF6;"><a name="segment&#x6587;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#segment&#x6587;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>2.4.2. segment&#x6587;&#x4EF6;</h3>
<ul>
<li>&#x751F;&#x4EA7;&#x8005;&#x751F;&#x4EA7;&#x7684;&#x6D88;&#x606F;&#x6309;&#x7167;&#x4E00;&#x5B9A;&#x7684;&#x5206;&#x533A;&#x7B56;&#x7565;&#x88AB;&#x53D1;&#x9001;&#x5230;topic&#x4E2D;&#x7684;&#x4E0D;&#x540C;partition&#xFF0C;partition&#x5728;&#x78C1;&#x76D8;&#x4E0A;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x76EE;&#x5F55;&#xFF0C;&#x8BE5;&#x76EE;&#x5F55;&#x540D;&#x662F;topic&#x7684;&#x540D;&#x79F0;&#x52A0;&#x4E0A;&#x4E00;&#x4E2A;&#x5E8F;&#x53F7;&#x3002;<ul>
<li>&#x5728;&#x8FD9;&#x4E2A;partition&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x6709;&#x4E24;&#x7C7B;&#x6587;&#x4EF6;&#xFF0C;&#x4E00;&#x7C7B;&#x662F;&#x4EE5;log&#x4E3A;&#x540E;&#x7F00;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x4E00;&#x7C7B;&#x662F;&#x4EE5;index&#x4E3A;&#x540E;&#x7F00;&#x7684;&#x6587;&#x4EF6;&#xFF0C;&#x6BCF;&#x4E00;&#x4E2A;log&#x6587;&#x4EF6;&#x548C;&#x4E00;&#x4E2A;index&#x6587;&#x4EF6;&#x76F8;&#x5BF9;&#x5E94;&#xFF0C;&#x8FD9;&#x4E00;&#x5BF9;&#x6587;&#x4EF6;&#x5C31;&#x662F;&#x4E00;&#x4E2A;segment file&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x6BB5;&#x3002;&#xFF08;<font color="red">segment file=log file+index file</font>&#xFF09;</li>
<li>&#x5176;&#x4E2D;&#x7684;log&#x6587;&#x4EF6;&#x5C31;&#x662F;&#x6570;&#x636E;&#x6587;&#x4EF6;&#xFF0C;&#x91CC;&#x9762;&#x5B58;&#x653E;&#x7684;&#x5C31;&#x662F;&#x6D88;&#x606F;&#xFF0C;&#x800C;index&#x6587;&#x4EF6;&#x662F;&#x7D22;&#x5F15;&#x6587;&#x4EF6;&#xFF0C;&#x7D22;&#x5F15;&#x6587;&#x4EF6;&#x8BB0;&#x5F55;&#x4E86;&#x5143;&#x6570;&#x636E;&#x4FE1;&#x606F;&#x3002;</li>
<li>log&#x6587;&#x4EF6;&#x8FBE;&#x5230;1G&#x540E;&#x6EDA;&#x52A8;&#x751F;&#x6210;&#x65B0;&#x7684;log&#x6587;&#x4EF6;&#x3002;</li>
</ul>
</li>
<li>segment&#x6587;&#x4EF6;&#x547D;&#x540D;&#x7684;&#x89C4;&#x5219;&#xFF1A;partition&#x5168;&#x5C40;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;segment&#x4ECE;0&#xFF08;20&#x4E2A;0&#xFF09;&#x5F00;&#x59CB;&#xFF0C;&#x540E;&#x7EED;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;segment&#x6587;&#x4EF6;&#x540D;&#x662F;&#x4E0A;&#x4E00;&#x4E2A;segment&#x6587;&#x4EF6;&#x4E2D;&#x6700;&#x540E;&#x4E00;&#x6761;&#x6D88;&#x606F;&#x7684;offset&#x503C;&#x3002;<ul>
<li>&#x8FD9;&#x6837;&#x8BBE;&#x8BA1;&#x7684;&#x597D;&#x5904;&#x662F;&#x65B9;&#x4FBF;&#x5B9A;&#x4F4D;&#x6D88;&#x8D39;&#x67D0;&#x4E00;&#x6761;&#x662F;offset&#x7684;&#x6D88;&#x606F;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x9996;&#x5148;&#x628A;&#x6240;&#x6709;&#x7684;log&#x6587;&#x4EF6;&#x540D;&#x6392;&#x5E8F;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;&#x4E8C;&#x5206;&#x67E5;&#x627E;&#x6CD5;&#x5B9A;&#x4F4D;offset&#x6240;&#x5728;&#x7684;log&#x6587;&#x4EF6;&#xFF0C;&#x7136;&#x540E;&#x5728;index&#x6587;&#x4EF6;&#x4E2D;&#x627E;&#x5230;offset&#x6240;&#x5BF9;&#x5E94;&#x6570;&#x636E;&#x5728;log&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x7269;&#x7406;&#x504F;&#x79FB;&#x4F4D;&#x7F6E;&#x3002;</li>
</ul>
</li>
</ul>
<h3 id="&#x5982;&#x4F55;&#x5FEB;&#x901F;&#x67E5;&#x8BE2;&#x6570;&#x636E;"><a name="&#x5982;&#x4F55;&#x5FEB;&#x901F;&#x67E5;&#x8BE2;&#x6570;&#x636E;" class="anchor-navigation-ex-anchor" href="#&#x5982;&#x4F55;&#x5FEB;&#x901F;&#x67E5;&#x8BE2;&#x6570;&#x636E;"><i class="fa fa-link" aria-hidden="true"></i></a>2.4.3. &#x5982;&#x4F55;&#x5FEB;&#x901F;&#x67E5;&#x8BE2;&#x6570;&#x636E;</h3>
<ul>
<li>Kafka&#x628A;topic&#x4E2D;&#x4E00;&#x4E2A;parition&#x5927;&#x6587;&#x4EF6;&#x5206;&#x6210;&#x591A;&#x4E2A;&#x5C0F;&#x6587;&#x4EF6;&#x6BB5;&#xFF0C;&#x901A;&#x8FC7;&#x591A;&#x4E2A;&#x5C0F;&#x6587;&#x4EF6;&#x6BB5;&#xFF0C;&#x5C31;&#x5BB9;&#x6613;&#x5B9A;&#x671F;&#x6E05;&#x9664;&#x6216;&#x5220;&#x9664;&#x5DF2;&#x7ECF;&#x6D88;&#x8D39;&#x5B8C;&#x6587;&#x4EF6;&#xFF0C;&#x51CF;&#x5C11;&#x78C1;&#x76D8;&#x5360;&#x7528;&#x3002;</li>
<li>&#x901A;&#x8FC7;&#x7D22;&#x5F15;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x5FEB;&#x901F;&#x5B9A;&#x4F4D;message&#x3002;<ul>
<li>index&#x6587;&#x4EF6;&#x5185;&#x5BB9;&#x662F; <code>x,y</code> &#x5F62;&#x5F0F;&#xFF0C;&#x5176;&#x4E2D;x&#x662F;&#x5F53;&#x524D;log&#x7684;&#x7B2C;x&#x6761;&#x6570;&#x636E;&#xFF08;&#x67E5;&#x627E;&#x7684;offset - log&#x7684;&#x6587;&#x4EF6;&#x540D;&#xFF09;&#xFF0C;y&#x662F;&#x6240;&#x5728;log&#x6587;&#x4EF6;&#x7684;&#x7269;&#x7406;&#x504F;&#x79FB;&#x4F4D;&#x7F6E;&#x3002;</li>
<li>&#x5728;index&#x6587;&#x4EF6;&#x4E2D;x&#x4E0D;&#x8FDE;&#x7EED;&#xFF0C;&#x7A00;&#x758F;&#x5B58;&#x50A8;&#xFF0C;index&#x6587;&#x4EF6;&#x4FDD;&#x5B58;&#x5728;&#x5185;&#x5B58;&#x4E2D;&#xFF0C;&#x63D0;&#x9AD8;&#x67E5;&#x8BE2;&#x6548;&#x7387;&#x3002;</li>
<li>&#x5982;&#x679C;&#x67E5;&#x627E;&#x7B2C;z&#x6761;&#x6570;&#x636E;&#xFF0C;&#x67E5;&#x627E;&#x5C0F;&#x4E8E;z&#x7684;&#x6700;&#x5927;x&#x503C;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;x&#x5728;log&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x7269;&#x7406;&#x504F;&#x79FB;&#x4F4D;&#x7F6E;&#xFF0C;&#x987A;&#x5E8F;&#x626B;&#x63CF;&#xFF0C;&#x627E;&#x5230;&#x7B2C;z&#x6761;&#x6570;&#x636E;&#x3002;</li>
<li>log&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x4E00;&#x6761;&#x6D88;&#x606F;&#x6570;&#x636E;&#x7684;&#x56FA;&#x5B9A;&#x7269;&#x7406;&#x7ED3;&#x6784;&#x5305;&#x62EC;&#xFF1A;offset&#xFF08;8 Bytes&#xFF09;&#x3001;message size&#xFF08;4 Bytes&#xFF09;&#x3001;crc32&#xFF08;4 Bytes&#xFF09;&#x3001;magic&#xFF08;1 Byte&#xFF09;&#x3001;attributes&#xFF08;1 Byte&#xFF09;&#x3001;key length&#xFF08;4 Bytes&#xFF09;&#x3001;key&#xFF08;K Bytes&#xFF09;&#x3001;payload length&#xFF08;4 Bytes&#xFF09;&#x3001;value bytes payload&#xFF08;K Bytes&#xFF09;&#x3002;</li>
</ul>
</li>
<li>&#x901A;&#x8FC7;index&#x5143;&#x6570;&#x636E;&#x5168;&#x90E8;&#x6620;&#x5C04;&#x5230;memory&#xFF0C;&#x53EF;&#x4EE5;&#x907F;&#x514D;segment file&#x7684;IO&#x78C1;&#x76D8;&#x64CD;&#x4F5C;&#x3002;</li>
<li>&#x901A;&#x8FC7;&#x7D22;&#x5F15;&#x6587;&#x4EF6;&#x7A00;&#x758F;&#x5B58;&#x50A8;&#xFF0C;&#x53EF;&#x4EE5;&#x5927;&#x5E45;&#x964D;&#x4F4E;index&#x6587;&#x4EF6;&#x5143;&#x6570;&#x636E;&#x5360;&#x7528;&#x7A7A;&#x95F4;&#x5927;&#x5C0F;&#x3002;</li>
</ul>
<h2 id="&#x9AD8;&#x541E;&#x5410;&#x3001;&#x4F4E;&#x5EF6;&#x65F6;&#x7684;&#x539F;&#x56E0;"><a name="&#x9AD8;&#x541E;&#x5410;&#x3001;&#x4F4E;&#x5EF6;&#x65F6;&#x7684;&#x539F;&#x56E0;" class="anchor-navigation-ex-anchor" href="#&#x9AD8;&#x541E;&#x5410;&#x3001;&#x4F4E;&#x5EF6;&#x65F6;&#x7684;&#x539F;&#x56E0;"><i class="fa fa-link" aria-hidden="true"></i></a>2.5. &#x9AD8;&#x541E;&#x5410;&#x3001;&#x4F4E;&#x5EF6;&#x65F6;&#x7684;&#x539F;&#x56E0;</h2>
<p>Kafka&#x662F;&#x5927;&#x6570;&#x636E;&#x9886;&#x57DF;&#x65E0;&#x5904;&#x4E0D;&#x5728;&#x7684;&#x6D88;&#x606F;&#x4E2D;&#x95F4;&#x4EF6;&#xFF0C;&#x76EE;&#x524D;&#x5E7F;&#x6CDB;&#x4F7F;&#x7528;&#x5728;&#x4F01;&#x4E1A;&#x5185;&#x90E8;&#x7684;&#x5B9E;&#x65F6;&#x6570;&#x636E;&#x7BA1;&#x9053;&#xFF0C;&#x5E76;&#x5E2E;&#x52A9;&#x4F01;&#x4E1A;&#x6784;&#x5EFA;&#x81EA;&#x5DF1;&#x7684;&#x6D41;&#x8BA1;&#x7B97;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x3002;Kafka&#x867D;&#x7136;&#x662F;&#x57FA;&#x4E8E;&#x78C1;&#x76D8;&#x505A;&#x7684;&#x6570;&#x636E;&#x5B58;&#x50A8;&#xFF0C;&#x4F46;&#x5374;&#x5177;&#x6709;&#x9AD8;&#x6027;&#x80FD;&#x3001;&#x9AD8;&#x541E;&#x5410;&#x3001;&#x4F4E;&#x5EF6;&#x65F6;&#x7684;&#x7279;&#x70B9;&#xFF0C;&#x5176;&#x541E;&#x5410;&#x91CF;&#x52A8;&#x8F84;&#x51E0;&#x4E07;&#x3001;&#x51E0;&#x5341;&#x4E0A;&#x767E;&#x4E07;&#xFF0C;&#x8FD9;&#x5176;&#x4E2D;&#x7684;&#x539F;&#x7531;&#x503C;&#x5F97;&#x6211;&#x4EEC;&#x4E00;&#x63A2;&#x7A76;&#x7ADF;&#x3002;</p>
<h3 id="&#x987A;&#x5E8F;&#x8BFB;&#x5199;"><a name="&#x987A;&#x5E8F;&#x8BFB;&#x5199;" class="anchor-navigation-ex-anchor" href="#&#x987A;&#x5E8F;&#x8BFB;&#x5199;"><i class="fa fa-link" aria-hidden="true"></i></a>2.5.1. &#x987A;&#x5E8F;&#x8BFB;&#x5199;</h3>
<p>&#x78C1;&#x76D8;&#x987A;&#x5E8F;&#x8BFB;&#x5199;&#x6027;&#x80FD;&#x8981;&#x9AD8;&#x4E8E;&#x5185;&#x5B58;&#x7684;&#x968F;&#x673A;&#x8BFB;&#x5199;&#x3002;</p>
<ul>
<li>&#x4E0D;&#x7BA1;&#x662F;&#x5185;&#x5B58;&#x8FD8;&#x662F;&#x78C1;&#x76D8;&#xFF0C;&#x5FEB;&#x6216;&#x6162;&#x5173;&#x952E;&#x5728;&#x4E8E;&#x5BFB;&#x5740;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x78C1;&#x76D8;&#x5206;&#x4E3A;&#x987A;&#x5E8F;&#x8BFB;&#x5199;&#x4E0E;&#x968F;&#x673A;&#x8BFB;&#x5199;&#xFF0C;&#x5185;&#x5B58;&#x4E5F;&#x4E00;&#x6837;&#x5206;&#x4E3A;&#x987A;&#x5E8F;&#x8BFB;&#x5199;&#x4E0E;&#x968F;&#x673A;&#x8BFB;&#x5199;&#x3002;&#x57FA;&#x4E8E;&#x78C1;&#x76D8;&#x7684;&#x968F;&#x673A;&#x8BFB;&#x5199;&#x786E;&#x5B9E;&#x5F88;&#x6162;&#xFF0C;&#x4F46;&#x78C1;&#x76D8;&#x7684;&#x987A;&#x5E8F;&#x8BFB;&#x5199;&#x6027;&#x80FD;&#x5374;&#x5F88;&#x9AD8;&#xFF0C;&#x4E00;&#x822C;&#x800C;&#x8A00;&#x8981;&#x9AD8;&#x51FA;&#x78C1;&#x76D8;&#x968F;&#x673A;&#x8BFB;&#x5199;&#x4E09;&#x4E2A;&#x6570;&#x91CF;&#x7EA7;&#xFF0C;&#x4E00;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x78C1;&#x76D8;&#x987A;&#x5E8F;&#x8BFB;&#x5199;&#x6027;&#x80FD;&#x751A;&#x81F3;&#x8981;&#x9AD8;&#x4E8E;&#x5185;&#x5B58;&#x968F;&#x673A;&#x8BFB;&#x5199;&#x3002;</li>
<li>&#x78C1;&#x76D8;&#x7684;&#x987A;&#x5E8F;&#x8BFB;&#x5199;&#x662F;&#x78C1;&#x76D8;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x4E2D;&#x6700;&#x6709;&#x89C4;&#x5F8B;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x4E5F;&#x5BF9;&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x505A;&#x4E86;&#x5927;&#x91CF;&#x4F18;&#x5316;&#xFF0C;Kafka&#x5C31;&#x662F;&#x4F7F;&#x7528;&#x4E86;&#x78C1;&#x76D8;&#x987A;&#x5E8F;&#x8BFB;&#x5199;&#x6765;&#x63D0;&#x5347;&#x7684;&#x6027;&#x80FD;&#x3002;Kafka&#x7684;message&#x662F;&#x4E0D;&#x65AD;&#x8FFD;&#x52A0;&#x5230;&#x672C;&#x5730;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#x672B;&#x5C3E;&#x7684;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x968F;&#x673A;&#x7684;&#x5199;&#x5165;&#xFF0C;&#x8FD9;&#x4F7F;&#x5F97;Kafka&#x5199;&#x5165;&#x541E;&#x5410;&#x91CF;&#x5F97;&#x5230;&#x4E86;&#x663E;&#x8457;&#x63D0;&#x5347;&#x3002;</li>
</ul>
<h3 id="page-cache&#xFF08;&#x9875;&#x7F13;&#x5B58;&#xFF09;"><a name="page-cache&#xFF08;&#x9875;&#x7F13;&#x5B58;&#xFF09;" class="anchor-navigation-ex-anchor" href="#page-cache&#xFF08;&#x9875;&#x7F13;&#x5B58;&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>2.5.2. Page Cache&#xFF08;&#x9875;&#x7F13;&#x5B58;&#xFF09;</h3>
<p>&#x4E3A;&#x4E86;&#x4F18;&#x5316;&#x8BFB;&#x5199;&#x6027;&#x80FD;&#xFF0C;Kafka&#x5229;&#x7528;&#x4E86;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x672C;&#x8EAB;&#x7684;Page Cache&#xFF0C;&#x5C31;&#x662F;&#x5229;&#x7528;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x81EA;&#x8EAB;&#x7684;&#x5185;&#x5B58;&#x800C;&#x4E0D;&#x662F;JVM&#x7A7A;&#x95F4;&#x5185;&#x5B58;&#x3002;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x597D;&#x5904;&#x6709;&#xFF1A;</p>
<ul>
<li>&#x907F;&#x514D;Object&#x6D88;&#x8017;&#xFF1A;&#x5982;&#x679C;&#x662F;&#x4F7F;&#x7528;Java&#x5806;&#xFF0C;Java&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x5B58;&#x6D88;&#x8017;&#x6BD4;&#x8F83;&#x5927;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x6240;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x7684;&#x4E24;&#x500D;&#x751A;&#x81F3;&#x66F4;&#x591A;&#x3002;</li>
<li>&#x907F;&#x514D;GC&#x95EE;&#x9898;&#xFF1A;&#x968F;&#x7740;JVM&#x4E2D;&#x6570;&#x636E;&#x4E0D;&#x65AD;&#x589E;&#x591A;&#xFF0C;&#x5783;&#x573E;&#x56DE;&#x6536;&#x5C06;&#x4F1A;&#x53D8;&#x5F97;&#x590D;&#x6742;&#x4E0E;&#x7F13;&#x6162;&#xFF0C;&#x4F7F;&#x7528;&#x7CFB;&#x7EDF;&#x7F13;&#x5B58;&#x5C31;&#x4E0D;&#x4F1A;&#x5B58;&#x5728;GC&#x95EE;&#x9898;&#x3002;</li>
</ul>
<h3 id="&#x96F6;&#x62F7;&#x8D1D;"><a name="&#x96F6;&#x62F7;&#x8D1D;" class="anchor-navigation-ex-anchor" href="#&#x96F6;&#x62F7;&#x8D1D;"><i class="fa fa-link" aria-hidden="true"></i></a>2.5.3. &#x96F6;&#x62F7;&#x8D1D;</h3>
<p>&#x96F6;&#x62F7;&#x8D1D;&#x5E76;&#x4E0D;&#x662F;&#x4E0D;&#x9700;&#x8981;&#x62F7;&#x8D1D;&#xFF0C;&#x800C;&#x662F;&#x51CF;&#x5C11;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x62F7;&#x8D1D;&#x6B21;&#x6570;&#x3002;&#x901A;&#x5E38;&#x662F;&#x8BF4;&#x5728;IO&#x8BFB;&#x5199;&#x8FC7;&#x7A0B;&#x4E2D;&#x3002;Kafka&#x5229;&#x7528;linux&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684; &quot;&#x96F6;&#x62F7;&#x8D1D;&#xFF08;zero-copy&#xFF09;&quot; &#x673A;&#x5236;&#x5728;&#x6D88;&#x8D39;&#x7AEF;&#x505A;&#x7684;&#x4F18;&#x5316;&#x3002;</p>
<ul>
<li>&#x4F20;&#x7EDF;&#x65B9;&#x5F0F;&#xFF0C;&#x8BFB;&#x53D6;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#x5E76;&#x8FDB;&#x884C;&#x7F51;&#x7EDC;&#x53D1;&#x9001;&#xFF0C;&#x7ECF;&#x8FC7;&#x7684;&#x56DB;&#x6B21;&#x6570;&#x636E;copy&#x662F;&#x975E;&#x5E38;&#x7E41;&#x7410;&#x7684;&#xFF08;&#x5185;&#x6838;&#x6001;&#x548C;&#x7528;&#x6237;&#x6001;&#x5207;&#x6362;&#xFF09;&#x3002;&#x5B9E;&#x9645;IO&#x8BFB;&#x5199;&#xFF0C;&#x9700;&#x8981;&#x8FDB;&#x884C;IO&#x4E2D;&#x65AD;&#xFF0C;&#x9700;&#x8981;CPU&#x54CD;&#x5E94;&#x4E2D;&#x65AD;&#xFF08;&#x4E0A;&#x4E0B;&#x6587;&#x5207;&#x6362;&#xFF09;&#xFF0C;&#x5C3D;&#x7BA1;&#x540E;&#x6765;&#x5F15;&#x5165;DMA&#xFF08;Direct Memory Access&#xFF09;&#x6765;&#x63A5;&#x7BA1;CPU&#x7684;&#x4E2D;&#x65AD;&#x8BF7;&#x6C42;&#xFF08;DMA&#x53EF;&#x4EE5;&#x7ED5;&#x8FC7;CPU&#xFF0C;&#x7531;&#x786C;&#x4EF6;&#x81EA;&#x5DF1;&#x53BB;&#x76F4;&#x63A5;&#x8BBF;&#x95EE;&#x7CFB;&#x7EDF;&#x4E3B;&#x5185;&#x5B58;&#xFF09;&#xFF0C;&#x4F46;&#x56DB;&#x6B21;copy&#x662F;&#x5B58;&#x5728;&#x201C;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x62F7;&#x8D1D;&#x201D;&#x7684;&#x3002;</li>
<li>&#x8BFB;&#x53D6;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#x540E;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x505A;&#x5176;&#x4ED6;&#x5904;&#x7406;&#xFF0C;&#x76F4;&#x63A5;&#x7528;&#x7F51;&#x7EDC;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#x3002;</li>
</ul>
<h3 id="&#x5206;&#x533A;&#x5206;&#x6BB5;"><a name="&#x5206;&#x533A;&#x5206;&#x6BB5;" class="anchor-navigation-ex-anchor" href="#&#x5206;&#x533A;&#x5206;&#x6BB5;"><i class="fa fa-link" aria-hidden="true"></i></a>2.5.4. &#x5206;&#x533A;&#x5206;&#x6BB5;</h3>
<h3 id="&#x7D22;&#x5F15;&#x4F18;&#x5316;"><a name="&#x7D22;&#x5F15;&#x4F18;&#x5316;" class="anchor-navigation-ex-anchor" href="#&#x7D22;&#x5F15;&#x4F18;&#x5316;"><i class="fa fa-link" aria-hidden="true"></i></a>2.5.5. &#x7D22;&#x5F15;&#x4F18;&#x5316;</h3>
<h3 id="&#x6279;&#x91CF;&#x8BFB;&#x5199;"><a name="&#x6279;&#x91CF;&#x8BFB;&#x5199;" class="anchor-navigation-ex-anchor" href="#&#x6279;&#x91CF;&#x8BFB;&#x5199;"><i class="fa fa-link" aria-hidden="true"></i></a>2.5.6. &#x6279;&#x91CF;&#x8BFB;&#x5199;</h3>
<h2 id="&#x5185;&#x6838;&#x539F;&#x7406;"><a name="&#x5185;&#x6838;&#x539F;&#x7406;" class="anchor-navigation-ex-anchor" href="#&#x5185;&#x6838;&#x539F;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>2.6. &#x5185;&#x6838;&#x539F;&#x7406;</h2>
<h3 id="hwleo&#x57FA;&#x672C;&#x6982;&#x5FF5;"><a name="hwleo&#x57FA;&#x672C;&#x6982;&#x5FF5;" class="anchor-navigation-ex-anchor" href="#hwleo&#x57FA;&#x672C;&#x6982;&#x5FF5;"><i class="fa fa-link" aria-hidden="true"></i></a>2.6.1. HW&amp;LEO&#x57FA;&#x672C;&#x6982;&#x5FF5;</h3>
<ol>
<li>Base Offset&#xFF1A;&#x662F;&#x8D77;&#x59CB;&#x4F4D;&#x79FB;&#xFF0C;&#x8BE5;&#x526F;&#x672C;&#x4E2D;&#x7B2C;&#x4E00;&#x6761;&#x6D88;&#x606F;&#x7684;offset&#xFF0C;&#x5982;&#x4E0B;&#x56FE;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x8D77;&#x59CB;&#x4F4D;&#x79FB;&#x662F;0&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x5199;&#x6EE1;1G&#x540E;&#xFF08;&#x9ED8;&#x8BA4;1G&#x540E;&#x4F1A;log rolling&#xFF09;&#xFF0C;&#x8FD9;&#x4E2A;&#x8D77;&#x59CB;&#x4F4D;&#x79FB;&#x5C31;&#x4E0D;&#x662F;0&#x5F00;&#x59CB;&#x4E86;&#x3002;</li>
<li>HW&#xFF08;high watermark&#xFF09;&#xFF1A;&#x526F;&#x672C;&#x7684;&#x9AD8;&#x6C34;&#x5370;&#x503C;&#xFF0C;replica&#x4E2D;leader&#x526F;&#x672C;&#x548C;follower&#x526F;&#x672C;&#x90FD;&#x4F1A;&#x6709;&#x8FD9;&#x4E2A;&#x503C;&#xFF0C;&#x901A;&#x8FC7;&#x5B83;&#x53EF;&#x4EE5;&#x5F97;&#x77E5;&#x526F;&#x672C;&#x4E2D;<strong>&#x5DF2;&#x63D0;&#x4EA4;</strong>&#x6216;<strong>&#x5DF2;&#x5907;&#x4EFD;</strong>&#x6D88;&#x606F;&#x7684;&#x8303;&#x56F4;&#xFF0C;leader&#x526F;&#x672C;&#x4E2D;&#x7684;HW&#xFF0C;&#x51B3;&#x5B9A;&#x4E86;&#x6D88;&#x8D39;&#x8005;&#x80FD;&#x6D88;&#x8D39;&#x7684;&#x6700;&#x65B0;&#x6D88;&#x606F;&#x80FD;&#x5230;&#x54EA;&#x4E2A;offset&#x3002;&#x5982;&#x4E0B;&#x56FE;&#x6240;&#x793A;&#xFF0C;HW&#x503C;&#x4E3A;8&#xFF0C;&#x4EE3;&#x8868;offset&#x4E3A; [0,8) &#x7684;8&#x6761;&#x6D88;&#x606F;&#x90FD;&#x53EF;&#x4EE5;&#x88AB;&#x6D88;&#x8D39;&#x5230;&#xFF0C;&#x5B83;&#x4EEC;&#x662F;&#x5BF9;&#x6D88;&#x8D39;&#x8005;&#x53EF;&#x89C1;&#x7684;&#xFF0C;&#x800C;[8,13) &#x8FD9;5&#x6761;&#x6D88;&#x606F;&#x7531;&#x4E8E;&#x672A;&#x63D0;&#x4EA4;&#xFF0C;&#x5BF9;&#x6D88;&#x8D39;&#x8005;&#x662F;&#x4E0D;&#x53EF;&#x89C1;&#x7684;&#x3002;&#x6CE8;&#x610F;HW&#x6700;&#x591A;&#x8FBE;&#x5230;LEO&#x503C;&#xFF0C;&#x8FD9;&#x65F6;&#x6D88;&#x8D39;&#x7684;&#x6D88;&#x606F;&#x8303;&#x56F4;&#x5C31;&#x662F;[0,13) &#x3002;</li>
<li>LEO&#xFF08;log end offset&#xFF09;&#xFF1A;&#x65E5;&#x5FD7;&#x672B;&#x7AEF;&#x4F4D;&#x79FB;&#xFF0C;<strong>&#x4EE3;&#x8868;&#x65E5;&#x5FD7;&#x6587;&#x4EF6;&#x4E2D;&#x4E0B;&#x4E00;&#x6761;&#x5F85;&#x5199;&#x5165;&#x6D88;&#x606F;&#x7684;offset</strong>&#xFF0C;&#x8FD9;&#x4E2A;offset&#x4E0A;&#x5B9E;&#x9645;&#x662F;&#x6CA1;&#x6709;&#x6D88;&#x606F;&#x7684;&#x3002;&#x4E0D;&#x7BA1;&#x662F;leader&#x526F;&#x672C;&#x8FD8;&#x662F;follower&#x526F;&#x672C;&#xFF0C;&#x90FD;&#x6709;&#x8FD9;&#x4E2A;&#x503C;&#x3002;&#x5F53;leader&#x526F;&#x672C;&#x6536;&#x5230;&#x751F;&#x4EA7;&#x8005;&#x7684;&#x4E00;&#x6761;&#x6D88;&#x606F;&#xFF0C;LEO&#x901A;&#x5E38;&#x4F1A;&#x81EA;&#x589E;1&#xFF0C;&#x800C;follower&#x526F;&#x672C;&#x9700;&#x8981;&#x4ECE;leader&#x526F;&#x672C;fetch&#x5230;&#x6570;&#x636E;&#x540E;&#xFF0C;&#x624D;&#x4F1A;&#x589E;&#x52A0;&#x5B83;&#x7684;LEO&#xFF0C;&#x6700;&#x540E;leader&#x526F;&#x672C;&#x4F1A;&#x6BD4;&#x8F83;&#x81EA;&#x5DF1;&#x7684;LEO&#x4EE5;&#x53CA;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x7684;follower&#xFF08;remote&#xFF09;&#x526F;&#x672C;&#x4E0A;&#x7684;LEO&#xFF0C;&#x9009;&#x53D6;&#x4E24;&#x8005;&#x4E2D;&#x8F83;&#x5C0F;&#x503C;&#x4F5C;&#x4E3A;&#x65B0;&#x7684;HW&#xFF0C;&#x6765;&#x66F4;&#x65B0;&#x81EA;&#x5DF1;&#x7684;HW&#x503C;&#x3002;</li>
<li>ISR&#xFF08;in-sync replica&#xFF09;&#xFF1A;&#x5C31;&#x662F;&#x540C;leader partition&#x4FDD;&#x6301;&#x540C;&#x6B65;&#x7684;follower partition&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x53EA;&#x6709;&#x5904;&#x4E8E;ISR&#x5217;&#x8868;&#x4E2D;&#x7684;follower&#x624D;&#x53EF;&#x4EE5;&#x5728;leader&#x5B95;&#x673A;&#x4E4B;&#x540E;&#x88AB;&#x9009;&#x4E3E;&#x4E3A;&#x65B0;&#x7684;leader&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x8FD9;&#x4E2A;ISR&#x5217;&#x8868;&#x91CC;&#x4EE3;&#x8868;&#x4ED6;&#x7684;&#x6570;&#x636E;&#x540C;leader&#x662F;&#x540C;&#x6B65;&#x7684;&#x3002;</li>
</ol>
<p><img src="file:///Users/yangxiaoyu/work/develop/repository/project/develop-stack/src/bigdata/kafka/Kafka&#x5206;&#x5E03;&#x5F0F;&#x6D88;&#x606F;&#x6D41;&#x5E73;&#x53F0;.assets/kafka_HW&amp;LEO.png?lastModify=1613958592" alt="kafka_HW&amp;LEO"></p>
<h3 id="hwleo&#x66F4;&#x65B0;&#x6D41;&#x7A0B;"><a name="hwleo&#x66F4;&#x65B0;&#x6D41;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#hwleo&#x66F4;&#x65B0;&#x6D41;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>2.6.2. HW&amp;LEO&#x66F4;&#x65B0;&#x6D41;&#x7A0B;</h3>
<p>LEO&#x548C;HW&#x7684;&#x66F4;&#x65B0;&#xFF0C;&#x9700;&#x8981;&#x533A;&#x5206;leader&#x526F;&#x672C;&#x548C;follower&#x526F;&#x672C;&#x3002;</p>
<ul>
<li><p>LEO &#x5305;&#x62EC;leader&#x526F;&#x672C;&#x548C;follower&#x526F;&#x672C;&#x3002;</p>
<ul>
<li>leader LEO&#xFF1A;leader&#x7684;LEO&#x5C31;&#x4FDD;&#x5B58;&#x5728;&#x5176;&#x6240;&#x5728;&#x7684;broker&#x7684;&#x7F13;&#x5B58;&#x91CC;&#xFF0C;&#x5F53;leader&#x526F;&#x672C;log&#x6587;&#x4EF6;&#x5199;&#x5165;&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x5C31;&#x4F1A;&#x66F4;&#x65B0;&#x81EA;&#x5DF1;&#x7684;LEO&#x3002;</li>
<li>remote LEO&#x548C;follower LEO&#xFF1A;remote LEO&#x662F;&#x4FDD;&#x5B58;&#x5728;leader&#x526F;&#x672C;&#x4E0A;&#x7684;follower&#x526F;&#x672C;&#x7684;LEO&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x51FA;leader&#x526F;&#x672C;&#x4E0A;&#x4FDD;&#x5B58;&#x6240;&#x6709;&#x526F;&#x672C;&#x7684;LEO&#xFF0C;&#x5F53;&#x7136;&#x4E5F;&#x5305;&#x62EC;&#x81EA;&#x5DF1;&#x7684;&#x3002;follower LEO&#x5C31;&#x662F;follower&#x526F;&#x672C;&#x7684;LEO&#xFF0C;&#x56E0;&#x6B64;follower&#x76F8;&#x5173;&#x7684;LEO&#x9700;&#x8981;&#x8003;&#x8651;&#x4E24;&#x79CD;&#x60C5;&#x51B5;:<ul>
<li>&#x5982;&#x679C;&#x662F;remote LEO&#xFF0C;&#x66F4;&#x65B0;&#x524D;leader&#x9700;&#x8981;&#x786E;&#x8BA4;follower&#x7684;fetch&#x8BF7;&#x6C42;&#x5305;&#x542B;&#x7684;offset&#xFF0C;&#x8FD9;&#x4E2A;offset&#x5C31;&#x662F;follower&#x526F;&#x672C;&#x7684;LEO&#xFF0C;&#x6839;&#x636E;&#x5B83;&#x5BF9;remote LEO&#x8FDB;&#x884C;&#x66F4;&#x65B0;&#x3002;&#x5982;&#x679C;&#x672A;&#x6536;&#x5230;fetch&#x8BF7;&#x6C42;&#xFF0C;&#x6216;&#x8005;fetch&#x8BF7;&#x6C42;&#x5728;&#x8BF7;&#x6C42;&#x961F;&#x5217;&#x4E2D;&#x6392;&#x961F;&#xFF0C;&#x5219;&#x4E0D;&#x505A;&#x66F4;&#x65B0;&#x3002;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x5728;leader&#x526F;&#x672C;&#x7ED9;follower&#x526F;&#x672C;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x4E4B;&#x524D;&#xFF0C;remote LEO&#x5C31;&#x5148;&#x66F4;&#x65B0;&#x4E86;&#x3002;</li>
<li>&#x5982;&#x679C;&#x662F;follower LEO&#xFF0C;&#x5B83;&#x7684;&#x66F4;&#x65B0;&#x662F;&#x5728;follower&#x526F;&#x672C;&#x5F97;&#x5230;leader&#x526F;&#x672C;&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;&#x5E76;&#x968F;&#x540E;&#x5199;&#x5165;&#x5230;log&#x6587;&#x4EF6;&#xFF0C;&#x5C31;&#x4F1A;&#x66F4;&#x65B0;&#x81EA;&#x5DF1;&#x7684;LEO&#x3002;</li>
</ul>
</li>
</ul>
</li>
<li><p>HW &#x5305;&#x62EC;leader&#x526F;&#x672C;&#x548C;follower&#x526F;&#x672C;&#x3002;</p>
<ul>
<li><p>leader HW&#xFF1A;&#x5B83;&#x7684;&#x66F4;&#x65B0;&#x662F;&#x6709;&#x6761;&#x4EF6;&#x7684;&#xFF1A;</p>
<ul>
<li>producer&#x5411;leader&#x5199;&#x6D88;&#x606F;&#xFF0C;&#x4F1A;&#x5C1D;&#x8BD5;&#x66F4;&#x65B0;&#x3002;</li>
<li>leader&#x5904;&#x7406;follower&#x7684;fetch&#x8BF7;&#x6C42;&#xFF0C;&#x5148;&#x8BFB;&#x53D6;log&#x6570;&#x636E;&#xFF0C;&#x7136;&#x540E;&#x5C1D;&#x8BD5;&#x66F4;&#x65B0;HW&#x3002;</li>
<li>&#x526F;&#x672C;&#x6210;&#x4E3A;leader&#x526F;&#x672C;&#x65F6;&#xFF0C;&#x4F1A;&#x5C1D;&#x8BD5;&#x66F4;&#x65B0;HW&#x3002;</li>
<li>broker&#x5D29;&#x6E83;&#x53EF;&#x80FD;&#x4F1A;&#x6CE2;&#x53CA;leader&#x526F;&#x672C;&#xFF0C;&#x4E5F;&#x9700;&#x8981;&#x5C1D;&#x8BD5;&#x66F4;&#x65B0;&#x3002;</li>
</ul>
<p>&#x66F4;&#x65B0;&#x65F6;&#x4F1A;&#x6BD4;&#x8F83;&#x6240;&#x6709;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x7684;&#x526F;&#x672C;&#x7684;LEO&#xFF0C;&#x5305;&#x62EC;&#x81EA;&#x5DF1;&#x7684;LEO&#x548C;remote LEO&#xFF0C;&#x9009;&#x53D6;&#x6700;&#x5C0F;&#x503C;&#x4F5C;&#x4E3A;&#x66F4;&#x65B0;&#x540E;&#x7684;leader HW&#x3002;&#x8FD9;&#x91CC;&#x7684;&#x6EE1;&#x8DB3;&#x6761;&#x4EF6;&#x65F6;&#xFF1A;</p>
<ul>
<li>&#x5904;&#x4E8E;ISR&#x4E2D;</li>
<li>&#x526F;&#x672C;LEO&#x843D;&#x540E;&#x4E8E;leader LEO&#x7684;&#x65F6;&#x957F;&#x4E0D;&#x5927;&#x4E8E;replica.lag.time.max.ms&#x53C2;&#x6570;&#x503C;&#xFF08;&#x9ED8;&#x8BA4;&#x503C;&#x662F;10&#x79D2;&#xFF09;&#xFF0C;&#x6216;&#x8005;&#x843D;&#x540E;Leader&#x7684;&#x6761;&#x6570;&#x4E0D;&#x5927;&#x4E8E;&#x9884;&#x5B9A;&#x503C;replica.lag.max.messages&#xFF08;&#x9ED8;&#x8BA4;&#x503C;&#x662F;4000&#xFF09;</li>
</ul>
</li>
<li><p>follower HW&#xFF1A;&#x66F4;&#x65B0;&#x53D1;&#x751F;&#x5728;follower&#x526F;&#x672C;&#x66F4;&#x65B0;LEO&#x4E4B;&#x540E;&#xFF0C;&#x4E00;&#x65E6;follower&#x5411;log&#x5199;&#x5B8C;&#x6570;&#x636E;&#xFF0C;&#x5B83;&#x5C31;&#x4F1A;&#x5C1D;&#x8BD5;&#x66F4;&#x65B0;HW&#x503C;&#x3002;&#x6BD4;&#x8F83;&#x81EA;&#x5DF1;&#x7684;LEO&#x503C;&#x4E0E;fetch&#x54CD;&#x5E94;&#x4E2D;leader&#x526F;&#x672C;&#x7684;HW&#x503C;&#xFF0C;&#x53D6;&#x6700;&#x5C0F;&#x8005;&#x4F5C;&#x4E3A;follower&#x526F;&#x672C;&#x7684;HW&#x503C;&#x3002;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#xFF0C;&#x5982;&#x679C;follower&#x7684;LEO&#x503C;&#x8D85;&#x8FC7;&#x4E86;leader&#x7684;HW&#x503C;&#xFF0C;&#x90A3;&#x4E48;follower HW&#x503C;&#x662F;&#x4E0D;&#x4F1A;&#x8D85;&#x8FC7;leader HW&#x503C;&#x7684;&#x3002;</p>
</li>
</ul>
</li>
</ul>
<p><img src="file:///Users/yangxiaoyu/work/develop/repository/project/develop-stack/src/bigdata/kafka/Kafka&#x5206;&#x5E03;&#x5F0F;&#x6D88;&#x606F;&#x6D41;&#x5E73;&#x53F0;.assets/kafka_HW&amp;LEO_update.png?lastModify=1613958592" alt="kafka_HW&amp;LEO_update"></p>
<h3 id="producer&#x6D88;&#x606F;&#x53D1;&#x9001;&#x6D41;&#x7A0B;"><a name="producer&#x6D88;&#x606F;&#x53D1;&#x9001;&#x6D41;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#producer&#x6D88;&#x606F;&#x53D1;&#x9001;&#x6D41;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>2.6.3. producer&#x6D88;&#x606F;&#x53D1;&#x9001;&#x6D41;&#x7A0B;</h3>
<p><img src="file:///Users/yangxiaoyu/work/develop/repository/project/develop-stack/src/bigdata/kafka/Kafka&#x5206;&#x5E03;&#x5F0F;&#x6D88;&#x606F;&#x6D41;&#x5E73;&#x53F0;.assets/kafka_producer_send_flow.png?lastModify=1613958592" alt="kafka_producer_send_flow"></p>
<p>&#x6D88;&#x606F;&#x53D1;&#x9001;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6D89;&#x53CA;&#x4E24;&#x4E2A;&#x7EBF;&#x7A0B;&#x534F;&#x540C;&#x5DE5;&#x4F5C;&#x3002;&#x4E3B;&#x7EBF;&#x7A0B;&#x9996;&#x5148;&#x5C06;&#x4E1A;&#x52A1;&#x6570;&#x636E;&#x5C01;&#x88C5;&#x6210;ProducerRecord&#x5BF9;&#x8C61;&#xFF0C;&#x4E4B;&#x540E;&#x8C03;&#x7528;send()&#x65B9;&#x6CD5;&#x5C06;&#x6D88;&#x606F;&#x653E;&#x5165;RecordAccumulator&#xFF08;&#x6D88;&#x606F;&#x6536;&#x96C6;&#x5668;&#xFF0C;&#x4E5F;&#x662F;&#x4E3B;&#x7EBF;&#x7A0B;&#x548C;sender&#x7EBF;&#x7A0B;&#x5171;&#x4EAB;&#x7684;&#x7F13;&#x51B2;&#x533A;&#xFF09;&#x4E2D;&#x6682;&#x5B58;&#x3002;Sender&#x7EBF;&#x7A0B;&#x8D1F;&#x8D23;&#x5C06;&#x6D88;&#x606F;&#x4FE1;&#x606F;&#x6784;&#x6210;&#x8BF7;&#x6C42;&#xFF0C;&#x6700;&#x7EC8;&#x6267;&#x884C;&#x7F51;&#x7EDC;I/O&#x7684;&#x7EBF;&#x7A0B;&#xFF0C;&#x5B83;&#x4ECE;RecordAccumulator&#x4E2D;&#x53D6;&#x51FA;&#x6D88;&#x606F;&#x5E76;&#x6279;&#x91CF;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#x3002;</p>
<ol>
<li>ProducerInterceptors&#x5BF9;&#x6D88;&#x606F;&#x8FDB;&#x884C;&#x62E6;&#x622A;&#x3002;</li>
<li>Serializer&#x5BF9;&#x6D88;&#x606F;&#x7684;key&#x548C;value&#x8FDB;&#x884C;&#x5E8F;&#x5217;&#x5316;&#x3002;</li>
<li>Partitioner&#x4E3A;&#x6D88;&#x606F;&#x9009;&#x62E9;&#x5408;&#x9002;&#x7684;Partition&#x3002;</li>
<li>RecordAccumulator&#x6536;&#x96C6;&#x6D88;&#x606F;&#xFF0C;&#x5B9E;&#x73B0;&#x6279;&#x91CF;&#x53D1;&#x9001;&#x3002;RecordAccumulator&#x662F;&#x4E00;&#x4E2A;&#x7F13;&#x51B2;&#x533A;&#xFF0C;&#x53EF;&#x4EE5;&#x7F13;&#x5B58;&#x4E00;&#x6279;&#x6570;&#x636E;&#xFF0C;&#x628A;topic&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x5206;&#x533A;&#x6570;&#x636E;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x961F;&#x5217;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x5C01;&#x88C5;&#x6D88;&#x606F;&#x6210;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x7684;batch&#x6279;&#x6B21;&#xFF0C;&#x6700;&#x540E;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x5206;&#x6279;&#x6B21;&#x6279;&#x91CF;&#x53D1;&#x9001;&#x3002;</li>
<li>Sender&#x4ECE;RecordAccumulator&#x83B7;&#x53D6;&#x6D88;&#x606F;&#x3002;</li>
<li>&#x6784;&#x9020;ClientRequest&#x3002;</li>
<li>&#x5C06;ClientRequest&#x4EA4;&#x7ED9;NetworkClient&#x51C6;&#x5907;&#x53D1;&#x9001;&#x3002;</li>
<li>NetworkClient&#x5C06;&#x8BF7;&#x6C42;&#x9001;&#x5165;KafkaChannel&#x7684;&#x7F13;&#x5B58;&#x3002;</li>
<li>&#x6267;&#x884C;&#x7F51;&#x7EDC;I/O&#xFF0C;&#x53D1;&#x9001;&#x8BF7;&#x6C42;&#x5230;kafka&#x96C6;&#x7FA4;&#x3002;</li>
<li>&#x6536;&#x5230;&#x54CD;&#x5E94;&#xFF0C;&#x8C03;&#x7528;ClientRequest&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>
<li>&#x8C03;&#x7528;RecordBatch&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x6700;&#x7EC8;&#x8C03;&#x7528;&#x6BCF;&#x4E2A;&#x6D88;&#x606F;&#x4E0A;&#x6CE8;&#x518C;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</li>
</ol>
<h3 id="consumer-&#x6D88;&#x8D39;&#x539F;&#x7406;"><a name="consumer-&#x6D88;&#x8D39;&#x539F;&#x7406;" class="anchor-navigation-ex-anchor" href="#consumer-&#x6D88;&#x8D39;&#x539F;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>2.6.4. consumer &#x6D88;&#x8D39;&#x539F;&#x7406;</h3>
<h4 id="coordinator"><a name="coordinator" class="anchor-navigation-ex-anchor" href="#coordinator"><i class="fa fa-link" aria-hidden="true"></i></a><a name="coordinator" class="plugin-anchor" href="#coordinator"><i class="fa fa-link" aria-hidden="true"></i></a>Coordinator</h4>
<p>Coordinator&#x4E00;&#x822C;&#x6307;&#x7684;&#x662F;&#x8FD0;&#x884C;&#x5728;broker&#x4E0A;&#x7684;group Coordinator&#xFF0C;&#x7528;&#x4E8E;&#x7BA1;&#x7406;Consumer Group&#x4E2D;&#x5404;&#x4E2A;&#x6210;&#x5458;&#xFF0C;&#x6BCF;&#x4E2A;KafkaServer&#x90FD;&#x6709;&#x4E00;&#x4E2A;GroupCoordinator&#x5B9E;&#x4F8B;&#xFF0C;&#x7BA1;&#x7406;&#x591A;&#x4E2A;&#x6D88;&#x8D39;&#x8005;&#x7EC4;&#xFF0C;&#x4E3B;&#x8981;&#x7528;&#x4E8E;offset&#x4F4D;&#x79FB;&#x7BA1;&#x7406;&#x548C;Consumer Rebalance&#x3002;</p>
<h5 id="coordinator&#x5B58;&#x50A8;&#x7684;&#x4FE1;&#x606F;"><a name="coordinator&#x5B58;&#x50A8;&#x7684;&#x4FE1;&#x606F;" class="anchor-navigation-ex-anchor" href="#coordinator&#x5B58;&#x50A8;&#x7684;&#x4FE1;&#x606F;"><i class="fa fa-link" aria-hidden="true"></i></a><a name="coordinator&#x5B58;&#x50A8;&#x7684;&#x4FE1;&#x606F;" class="plugin-anchor" href="#coordinator&#x5B58;&#x50A8;&#x7684;&#x4FE1;&#x606F;"><i class="fa fa-link" aria-hidden="true"></i></a>Coordinator&#x5B58;&#x50A8;&#x7684;&#x4FE1;&#x606F;</h5>
<p>&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;Consumer Group&#xFF0C;Coordinator&#x4F1A;&#x5B58;&#x50A8;&#x4EE5;&#x4E0B;&#x4FE1;&#x606F;&#xFF1A;</p>
<ol>
<li>&#x5BF9;&#x6BCF;&#x4E2A;&#x5B58;&#x5728;&#x7684;topic&#xFF0C;&#x53EF;&#x4EE5;&#x6709;&#x591A;&#x4E2A;&#x6D88;&#x8D39;&#x7EC4;group&#x8BA2;&#x9605;&#x540C;&#x4E00;&#x4E2A;topic&#xFF08;&#x5BF9;&#x5E94;&#x6D88;&#x606F;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x5E7F;&#x64AD;&#xFF09;</li>
<li>&#x5BF9;&#x6BCF;&#x4E2A;Consumer Group&#xFF0C;&#x5143;&#x6570;&#x636E;&#x5982;&#x4E0B;&#xFF1A;<ul>
<li>&#x8BA2;&#x9605;&#x7684;topics&#x5217;&#x8868;</li>
<li>Consumer Group&#x914D;&#x7F6E;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;session timeout&#x7B49;</li>
<li>&#x7EC4;&#x4E2D;&#x6BCF;&#x4E2A;Consumer&#x7684;&#x5143;&#x6570;&#x636E;&#x3002;&#x5305;&#x62EC;&#x4E3B;&#x673A;&#x540D;&#xFF0C;consumer id</li>
<li>&#x6BCF;&#x4E2A;&#x6B63;&#x5728;&#x6D88;&#x8D39;&#x7684;topic partition&#x7684;&#x5F53;&#x524D;offsets</li>
<li>Partition&#x7684;ownership&#x5143;&#x6570;&#x636E;&#xFF0C;&#x5305;&#x62EC;consumer&#x6D88;&#x8D39;&#x7684;partitions&#x6620;&#x5C04;&#x5173;&#x7CFB;</li>
</ul>
</li>
</ol>
<h5 id="&#x5982;&#x4F55;&#x786E;&#x5B9A;consumer-group&#x7684;coordinator"><a name="&#x5982;&#x4F55;&#x786E;&#x5B9A;consumer-group&#x7684;coordinator" class="anchor-navigation-ex-anchor" href="#&#x5982;&#x4F55;&#x786E;&#x5B9A;consumer-group&#x7684;coordinator"><i class="fa fa-link" aria-hidden="true"></i></a><a name="&#x5982;&#x4F55;&#x786E;&#x5B9A;consumer-group&#x7684;coordinator" class="plugin-anchor" href="#&#x5982;&#x4F55;&#x786E;&#x5B9A;consumer-group&#x7684;coordinator"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5982;&#x4F55;&#x786E;&#x5B9A;consumer group&#x7684;coordinator</h5>
<p>consumer group&#x5982;&#x4F55;&#x786E;&#x5B9A;&#x81EA;&#x5DF1;&#x7684;coordinator&#x662F;&#x8C01;&#x5462;&#xFF1F; &#x7B80;&#x5355;&#x6765;&#x8BF4;&#x5206;&#x4E3A;&#x4E24;&#x6B65;&#xFF1A;</p>
<ol>
<li><p>&#x786E;&#x5B9A;consumer group&#x4F4D;&#x79FB;&#x4FE1;&#x606F;&#x5199;&#x5165; <code>__consumer_offsets</code> &#x8FD9;&#x4E2A;topic&#x7684;&#x54EA;&#x4E2A;&#x5206;&#x533A;&#x3002;&#x5177;&#x4F53;&#x8BA1;&#x7B97;&#x516C;&#x5F0F;&#xFF1A; <code>__consumers_offsets-partition = Math.abs(groupId.hashCode() % groupMetadataTopicPartitionCount)</code></p>
<p>&#x6CE8;&#x610F;&#xFF1A;groupMetadataTopicPartitionCount&#x7531;offsets.topic.num.partitions&#x6307;&#x5B9A;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;50&#x4E2A;&#x5206;&#x533A;&#x3002;</p>
</li>
<li><p>&#x8BE5;&#x5206;&#x533A;leader&#x6240;&#x5728;&#x7684;broker&#x5C31;&#x662F;&#x88AB;&#x9009;&#x5B9A;&#x7684;coordinator</p>
</li>
</ol>
<h4 id="offset&#x7BA1;&#x7406;"><a name="offset&#x7BA1;&#x7406;" class="anchor-navigation-ex-anchor" href="#offset&#x7BA1;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a><a name="offset&#x7BA1;&#x7406;" class="plugin-anchor" href="#offset&#x7BA1;&#x7406;"><i class="fa fa-link" aria-hidden="true"></i></a>offset&#x7BA1;&#x7406;</h4>
<p>&#x8001;&#x7248;&#x672C;&#x7684;&#x4F4D;&#x79FB;&#x662F;&#x63D0;&#x4EA4;&#x5230;zookeeper&#x4E2D;&#x7684;&#xFF0C;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x662F;&#xFF1A;<code>/consumers/&lt;group.id&gt;/offsets/&lt;topic&gt;/&lt;partitionId&gt;</code>&#xFF0C;&#x4F46;&#x662F;zookeeper&#x5E76;&#x4E0D;&#x9002;&#x5408;&#x8FDB;&#x884C;&#x5927;&#x6279;&#x91CF;&#x7684;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5199;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x56E0;&#x6B64;&#xFF0C;kafka&#x63D0;&#x4F9B;&#x4E86;&#x53E6;&#x4E00;&#x79CD;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF1A;&#x589E;&#x52A0; <code>__consumer_offsets</code>&#xFF0C;&#x5C06;offset&#x4FE1;&#x606F;&#x5199;&#x5165;&#x8FD9;&#x4E2A;topic&#xFF0C;&#x6446;&#x8131;&#x5BF9;zookeeper&#x7684;&#x4F9D;&#x8D56;&#x3002;<code>__consumer_offsets</code> &#x4E2D;&#x7684;&#x6D88;&#x606F;&#x4FDD;&#x5B58;&#x4E86;&#x6BCF;&#x4E2A;consumer group&#x67D0;&#x4E00;&#x65F6;&#x523B;&#x63D0;&#x4EA4;&#x7684;offset&#x4FE1;&#x606F;&#xFF0C;key&#x662F;group.id+topic+&#x5206;&#x533A;&#x53F7;&#xFF0C;value&#x662F;offset&#x3002;<code>__consumers_offsets</code> &#x914D;&#x7F6E;&#x4E86;compact&#x7B56;&#x7565;&#xFF0C;&#x4F7F;&#x5F97;&#x5B83;&#x603B;&#x662F;&#x80FD;&#x591F;&#x4FDD;&#x5B58;&#x6700;&#x65B0;&#x7684;&#x4F4D;&#x79FB;&#x4FE1;&#x606F;&#xFF0C;&#x65E2;&#x63A7;&#x5236;&#x4E86;&#x8BE5;topic&#x603B;&#x4F53;&#x7684;&#x65E5;&#x5FD7;&#x5BB9;&#x91CF;&#xFF0C;&#x4E5F;&#x80FD;&#x5B9E;&#x73B0;&#x4FDD;&#x5B58;&#x6700;&#x65B0;offset&#x7684;&#x76EE;&#x7684;&#x3002;</p>
<h4 id="rebalance"><a name="rebalance" class="anchor-navigation-ex-anchor" href="#rebalance"><i class="fa fa-link" aria-hidden="true"></i></a><a name="rebalance" class="plugin-anchor" href="#rebalance"><i class="fa fa-link" aria-hidden="true"></i></a>Rebalance</h4>
<p>rebalance&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x4E00;&#x79CD;&#x534F;&#x8BAE;&#xFF0C;&#x89C4;&#x5B9A;&#x4E86;&#x4E00;&#x4E2A;consumer group&#x4E0B;&#x7684;&#x6240;&#x6709;consumer&#x5982;&#x4F55;&#x8FBE;&#x6210;&#x4E00;&#x81F4;&#x6765;&#x5206;&#x914D;&#x8BA2;&#x9605;topic&#x7684;&#x6BCF;&#x4E2A;&#x5206;&#x533A;&#x3002;&#x6BD4;&#x5982;&#x67D0;&#x4E2A;group&#x4E0B;&#x6709;20&#x4E2A;consumer&#xFF0C;&#x5B83;&#x8BA2;&#x9605;&#x4E86;&#x4E00;&#x4E2A;&#x5177;&#x6709;100&#x4E2A;&#x5206;&#x533A;&#x7684;topic&#x3002;&#x6B63;&#x5E38;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;Kafka&#x5E73;&#x5747;&#x4F1A;&#x4E3A;&#x6BCF;&#x4E2A;consumer&#x5206;&#x914D;5&#x4E2A;&#x5206;&#x533A;&#x3002;&#x8FD9;&#x4E2A;&#x5206;&#x914D;&#x7684;&#x8FC7;&#x7A0B;&#x5C31;&#x53EB;rebalance&#x3002;</p>
<h5 id="&#x89E6;&#x53D1;&#x6761;&#x4EF6;"><a name="&#x89E6;&#x53D1;&#x6761;&#x4EF6;" class="anchor-navigation-ex-anchor" href="#&#x89E6;&#x53D1;&#x6761;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a><a name="&#x89E6;&#x53D1;&#x6761;&#x4EF6;" class="plugin-anchor" href="#&#x89E6;&#x53D1;&#x6761;&#x4EF6;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x89E6;&#x53D1;&#x6761;&#x4EF6;</h5>
<ol>
<li>&#x7EC4;&#x6210;&#x5458;&#x53D1;&#x751F;&#x53D8;&#x66F4;&#x3002;&#x5982;&#xFF1A;&#x65B0;consumer&#x52A0;&#x5165;&#x7EC4;&#x3001;&#x5DF2;&#x6709;consumer&#x4E3B;&#x52A8;&#x79BB;&#x5F00;&#x7EC4;&#x6216;&#x5DF2;&#x6709;consumer&#x5D29;&#x6E83;&#x3002;</li>
<li>&#x8BA2;&#x9605;&#x4E3B;&#x9898;&#x6570;&#x53D1;&#x751F;&#x53D8;&#x66F4;&#x3002;</li>
<li>&#x8BA2;&#x9605;&#x4E3B;&#x9898;&#x7684;&#x5206;&#x533A;&#x6570;&#x53D1;&#x751F;&#x53D8;&#x66F4;&#x3002;</li>
</ol>
<h5 id="&#x534F;&#x8BAE;&#xFF08;protocol&#xFF09;"><a name="&#x534F;&#x8BAE;&#xFF08;protocol&#xFF09;" class="anchor-navigation-ex-anchor" href="#&#x534F;&#x8BAE;&#xFF08;protocol&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a><a name="&#x534F;&#x8BAE;&#xFF08;protocol&#xFF09;" class="plugin-anchor" href="#&#x534F;&#x8BAE;&#xFF08;protocol&#xFF09;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x534F;&#x8BAE;&#xFF08;protocol&#xFF09;</h5>
<p>rebalance&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x4E00;&#x7EC4;&#x534F;&#x8BAE;&#x3002;group&#x4E0E;coordinator&#x5171;&#x540C;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x5B8C;&#x6210;group&#x7684;rebalance&#x3002;&#x76EE;&#x524D;kafka&#x63D0;&#x4F9B;&#x4E86;5&#x4E2A;&#x534F;&#x8BAE;&#x6765;&#x5904;&#x7406;&#x4E0E;consumer group coordination&#x76F8;&#x5173;&#x7684;&#x95EE;&#x9898;&#xFF1A;</p>
<ul>
<li>Heartbeat&#x8BF7;&#x6C42;&#xFF1A;consumer&#x9700;&#x8981;&#x5B9A;&#x671F;&#x7ED9;coordinator&#x53D1;&#x9001;&#x5FC3;&#x8DF3;&#x6765;&#x8868;&#x660E;&#x81EA;&#x5DF1;&#x8FD8;&#x6D3B;&#x7740;</li>
<li>LeaveGroup&#x8BF7;&#x6C42;&#xFF1A;&#x4E3B;&#x52A8;&#x544A;&#x8BC9;coordinator&#x6211;&#x8981;&#x79BB;&#x5F00;consumer group</li>
<li>SyncGroup&#x8BF7;&#x6C42;&#xFF1A;group leader&#x628A;&#x5206;&#x914D;&#x65B9;&#x6848;&#x544A;&#x8BC9;&#x7EC4;&#x5185;&#x6240;&#x6709;&#x6210;&#x5458;</li>
<li>JoinGroup&#x8BF7;&#x6C42;&#xFF1A;&#x6210;&#x5458;&#x8BF7;&#x6C42;&#x52A0;&#x5165;&#x7EC4;</li>
<li>DescribeGroup&#x8BF7;&#x6C42;&#xFF1A;&#x663E;&#x793A;&#x7EC4;&#x7684;&#x6240;&#x6709;&#x4FE1;&#x606F;&#xFF0C;&#x5305;&#x62EC;&#x6210;&#x5458;&#x4FE1;&#x606F;&#xFF0C;&#x534F;&#x8BAE;&#x540D;&#x79F0;&#xFF0C;&#x5206;&#x914D;&#x65B9;&#x6848;&#xFF0C;&#x8BA2;&#x9605;&#x4FE1;&#x606F;&#x7B49;&#x3002;&#x901A;&#x5E38;&#x8BE5;&#x8BF7;&#x6C42;&#x662F;&#x7ED9;&#x7BA1;&#x7406;&#x5458;&#x4F7F;&#x7528;</li>
</ul>
<h5 id="liveness"><a name="liveness" class="anchor-navigation-ex-anchor" href="#liveness"><i class="fa fa-link" aria-hidden="true"></i></a><a name="liveness" class="plugin-anchor" href="#liveness"><i class="fa fa-link" aria-hidden="true"></i></a>liveness</h5>
<p>consumer&#x5982;&#x4F55;&#x5411;coordinator&#x8BC1;&#x660E;&#x81EA;&#x5DF1;&#x8FD8;&#x6D3B;&#x7740;&#xFF1F; &#x901A;&#x8FC7;&#x5B9A;&#x65F6;&#x5411;coordinator&#x53D1;&#x9001;Heartbeat&#x8BF7;&#x6C42;&#x3002;&#x5982;&#x679C;&#x8D85;&#x8FC7;&#x4E86;&#x8BBE;&#x5B9A;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF0C;&#x90A3;&#x4E48;coordinator&#x5C31;&#x8BA4;&#x4E3A;&#x8FD9;&#x4E2A;consumer&#x5DF2;&#x7ECF;&#x6302;&#x4E86;&#x3002;&#x4E00;&#x65E6;coordinator&#x8BA4;&#x4E3A;&#x67D0;&#x4E2A;consumer&#x6302;&#x4E86;&#xFF0C;&#x90A3;&#x4E48;&#x5B83;&#x5C31;&#x4F1A;&#x5F00;&#x542F;&#x65B0;&#x4E00;&#x8F6E;rebalance&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x5F53;&#x524D;&#x5176;&#x4ED6;consumer&#x7684;&#x5FC3;&#x8DF3;response&#x4E2D;&#x6DFB;&#x52A0;&#x201C;REBALANCE_IN_PROGRESS&#x201D;&#xFF0C;&#x544A;&#x8BC9;&#x5176;&#x4ED6;consumer&#x91CD;&#x65B0;&#x7533;&#x8BF7;&#x52A0;&#x5165;&#x7EC4;&#x3002;</p>
<h5 id="rebalance&#x8FC7;&#x7A0B;"><a name="rebalance&#x8FC7;&#x7A0B;" class="anchor-navigation-ex-anchor" href="#rebalance&#x8FC7;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a><a name="rebalance&#x8FC7;&#x7A0B;" class="plugin-anchor" href="#rebalance&#x8FC7;&#x7A0B;"><i class="fa fa-link" aria-hidden="true"></i></a>Rebalance&#x8FC7;&#x7A0B;</h5>
<p>rebalance&#x7684;&#x524D;&#x63D0;&#x662F;coordinator&#x5DF2;&#x7ECF;&#x786E;&#x5B9A;&#x3002;&#x603B;&#x4F53;&#x800C;&#x8A00;&#xFF0C;rebalance&#x5206;&#x4E3A;2&#x6B65;&#xFF1A;Join&#x548C;Sync&#x3002;</p>
<ol>
<li>Join&#xFF0C; &#x987E;&#x540D;&#x601D;&#x4E49;&#x5C31;&#x662F;&#x52A0;&#x5165;&#x7EC4;&#x3002;&#x8FD9;&#x4E00;&#x6B65;&#x4E2D;&#xFF0C;&#x6240;&#x6709;&#x6210;&#x5458;&#x90FD;&#x5411;coordinator&#x53D1;&#x9001;JoinGroup&#x8BF7;&#x6C42;&#xFF0C;&#x8BF7;&#x6C42;&#x5165;&#x7EC4;&#x3002;&#x4E00;&#x65E6;&#x6240;&#x6709;&#x6210;&#x5458;&#x90FD;&#x53D1;&#x9001;&#x4E86;JoinGroup&#x8BF7;&#x6C42;&#xFF0C;coordinator&#x4F1A;&#x4ECE;&#x4E2D;&#x9009;&#x62E9;&#x4E00;&#x4E2A;consumer&#x62C5;&#x4EFB;leader&#x7684;&#x89D2;&#x8272;&#xFF0C;&#x5E76;&#x628A;&#x7EC4;&#x6210;&#x5458;&#x4FE1;&#x606F;&#x4EE5;&#x53CA;&#x8BA2;&#x9605;&#x4FE1;&#x606F;&#x53D1;&#x7ED9;leader&#x2014;&#x2014;&#x6CE8;&#x610F;leader&#x548C;coordinator&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x6982;&#x5FF5;&#x3002;leader&#x8D1F;&#x8D23;&#x6D88;&#x8D39;&#x5206;&#x914D;&#x65B9;&#x6848;&#x7684;&#x5236;&#x5B9A;&#x3002;</li>
<li>Sync&#xFF0C;&#x8FD9;&#x4E00;&#x6B65;leader&#x5F00;&#x59CB;&#x5206;&#x914D;&#x6D88;&#x8D39;&#x65B9;&#x6848;&#xFF0C;&#x5373;&#x54EA;&#x4E2A;consumer&#x8D1F;&#x8D23;&#x6D88;&#x8D39;&#x54EA;&#x4E9B;topic&#x7684;&#x54EA;&#x4E9B;partition&#x3002;&#x4E00;&#x65E6;&#x5B8C;&#x6210;&#x5206;&#x914D;&#xFF0C;leader&#x4F1A;&#x5C06;&#x8FD9;&#x4E2A;&#x65B9;&#x6848;&#x5C01;&#x88C5;&#x8FDB;SyncGroup&#x8BF7;&#x6C42;&#x4E2D;&#x53D1;&#x7ED9;coordinator&#xFF0C;&#x975E;leader&#x4E5F;&#x4F1A;&#x53D1;SyncGroup&#x8BF7;&#x6C42;&#xFF0C;&#x53EA;&#x662F;&#x5185;&#x5BB9;&#x4E3A;&#x7A7A;&#x3002;coordinator&#x63A5;&#x6536;&#x5230;&#x5206;&#x914D;&#x65B9;&#x6848;&#x4E4B;&#x540E;&#x4F1A;&#x628A;&#x65B9;&#x6848;&#x585E;&#x8FDB;SyncGroup&#x7684;response&#x4E2D;&#x53D1;&#x7ED9;&#x5404;&#x4E2A;consumer&#x3002;&#x8FD9;&#x6837;&#x7EC4;&#x5185;&#x7684;&#x6240;&#x6709;&#x6210;&#x5458;&#x5C31;&#x90FD;&#x77E5;&#x9053;&#x81EA;&#x5DF1;&#x5E94;&#x8BE5;&#x6D88;&#x8D39;&#x54EA;&#x4E9B;&#x5206;&#x533A;&#x4E86;&#x3002;</li>
</ol>
<p><img src="file:///Users/yangxiaoyu/work/develop/repository/project/develop-stack/src/bigdata/kafka/Kafka&#x5206;&#x5E03;&#x5F0F;&#x6D88;&#x606F;&#x6D41;&#x5E73;&#x53F0;.assets/kafka_consumer_rebalance.png?lastModify=1613958592" alt="kafka_consumer_rebalance"></p>
<h5 id="rebalance&#x5206;&#x914D;&#x65B9;&#x6848;&#x7B56;&#x7565;"><a name="rebalance&#x5206;&#x914D;&#x65B9;&#x6848;&#x7B56;&#x7565;" class="anchor-navigation-ex-anchor" href="#rebalance&#x5206;&#x914D;&#x65B9;&#x6848;&#x7B56;&#x7565;"><i class="fa fa-link" aria-hidden="true"></i></a><a name="rebalance&#x5206;&#x914D;&#x65B9;&#x6848;&#x7B56;&#x7565;" class="plugin-anchor" href="#rebalance&#x5206;&#x914D;&#x65B9;&#x6848;&#x7B56;&#x7565;"><i class="fa fa-link" aria-hidden="true"></i></a>Rebalance&#x5206;&#x914D;&#x65B9;&#x6848;&#x7B56;&#x7565;</h5>
<h6 id="&#x5206;&#x914D;&#x65B9;&#x6848;&#x7B56;&#x7565;"><a name="&#x5206;&#x914D;&#x65B9;&#x6848;&#x7B56;&#x7565;" class="anchor-navigation-ex-anchor" href="#&#x5206;&#x914D;&#x65B9;&#x6848;&#x7B56;&#x7565;"><i class="fa fa-link" aria-hidden="true"></i></a><a name="&#x5206;&#x914D;&#x65B9;&#x6848;&#x7B56;&#x7565;" class="plugin-anchor" href="#&#x5206;&#x914D;&#x65B9;&#x6848;&#x7B56;&#x7565;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x5206;&#x914D;&#x65B9;&#x6848;&#x7B56;&#x7565;</h6>
<p>&#x5047;&#x8BBE;topic&#x6709;12&#x4E2A;&#x5206;&#x533A;&#x5206;&#x522B;&#x662F;&#xFF1A;p0&#xFF0C;p1&#xFF0C;p2&#xFF0C;p3&#xFF0C;p4&#xFF0C;p5&#xFF0C;p6&#xFF0C;p7&#xFF0C;p8&#xFF0C;p9&#xFF0C;p10&#xFF0C;p11&#xFF1B;&#x4E09;&#x4E2A;&#x6D88;&#x8D39;&#x8005;&#x5206;&#x522B;&#x662F;&#xFF1A;c1&#xFF0C;c2&#xFF0C;c3</p>
<ul>
<li><p>RangeAssignor &#x8303;&#x56F4;&#x7B56;&#x7565;&#xFF08;&#x9ED8;&#x8BA4;&#xFF09;</p>
<p>c1&#xFF1A;p0&#xFF0C;p1&#xFF0C;p2&#xFF0C;p3</p>
<p>c2&#xFF1A;p4&#xFF0C;p5&#xFF0C;p6&#xFF0C;p7</p>
<p>c3&#xFF1A;p8&#xFF0C;p9&#xFF0C;p10&#xFF0C;p11</p>
<p>&#x5047;&#x8BBE;c1&#x5B95;&#x673A;&#xFF1A;</p>
<p><del>c1</del></p>
<p>c2&#xFF1A;p0&#xFF0C;p1&#xFF0C;p2&#xFF0C;p3&#xFF0C;p4&#xFF0C;p5</p>
<p>c3&#xFF1A;p6&#xFF0C;p7&#xFF0C;p8&#xFF0C;p9&#xFF0C;p10&#xFF0C;p11</p>
</li>
<li><p>RoundRobinAssignor &#x8F6E;&#x8BE2;&#x7B56;&#x7565;</p>
<p>c1&#xFF1A;p0&#xFF0C;p3&#xFF0C;p6&#xFF0C;p9</p>
<p>c2&#xFF1A;p1&#xFF0C;p4&#xFF0C;p7&#xFF0C;p10</p>
<p>c3&#xFF1A;p2&#xFF0C;p5&#xFF0C;p8&#xFF0C;p11</p>
<p>&#x5047;&#x8BBE;c1&#x5B95;&#x673A;&#xFF1A;</p>
<p><del>c1</del></p>
<p>c2&#xFF1A;p0&#xFF0C;p2&#xFF0C;p4&#xFF0C;p6&#xFF0C;p8&#xFF0C;p10</p>
<p>c3&#xFF1A;p1&#xFF0C;p3&#xFF0C;p5&#xFF0C;p7&#xFF0C;p9&#xFF0C;p11</p>
</li>
</ul>
<p>&#x4EE5;&#x4E0A;&#x4E24;&#x79CD;&#x65B9;&#x6848;&#xFF0C;&#x5047;&#x8BBE;c1&#x5B95;&#x673A;&#xFF0C;&#x89E6;&#x53D1;Rebalance&#xFF0C;&#x90FD;&#x4F1A;&#x51FA;&#x73B0;&#x65E0;&#x89C6;&#x5386;&#x53F2;&#x5206;&#x914D;&#x65B9;&#x6848;&#x7684;&#x7F3A;&#x9677;&#x3002;</p>
<ul>
<li><p>StickyAssignor &#x9ECF;&#x6027;&#x7B56;&#x7565;</p>
<p>c1&#xFF1A;p0&#xFF0C;p1&#xFF0C;p2&#xFF0C;p3</p>
<p>c2&#xFF1A;p4&#xFF0C;p5&#xFF0C;p6&#xFF0C;p7</p>
<p>c3&#xFF1A;p8&#xFF0C;p9&#xFF0C;p10&#xFF0C;p11</p>
<p>&#x5047;&#x8BBE;c1&#x5B95;&#x673A;&#xFF1A;</p>
<p><del>c1</del></p>
<p>c2&#xFF1A;p0&#xFF0C;p1&#xFF0C;p4&#xFF0C;p5&#xFF0C;p6&#xFF0C;p7</p>
<p>c3&#xFF1A;p2&#xFF0C;p3&#xFF0C;p8&#xFF0C;p9&#xFF0C;p10&#xFF0C;p11</p>
</li>
</ul>
<p>&#x91C7;&#x7528;&#x4E86;&#x201D;&#x6709;&#x9ECF;&#x6027;&#x201D;&#x7684;&#x7B56;&#x7565;&#x5BF9;&#x6240;&#x6709;consumer&#x5B9E;&#x4F8B;&#x8FDB;&#x884C;&#x5206;&#x914D;&#xFF0C;&#x53EF;&#x4EE5;&#x89C4;&#x907F;&#x6781;&#x7AEF;&#x60C5;&#x51B5;&#x4E0B;&#x7684;&#x6570;&#x636E;&#x503E;&#x659C;&#x5E76;&#x4E14;&#x5728;&#x4E24;&#x6B21;rebalance&#x95F4;&#x6700;&#x5927;&#x9650;&#x5EA6;&#x5730;&#x7EF4;&#x6301;&#x4E86;&#x4E4B;&#x524D;&#x7684;&#x5206;&#x914D;&#x65B9;&#x6848;&#x3002;</p>
<h6 id="&#x4F7F;&#x7528;&#x573A;&#x666F;&#x548C;&#x914D;&#x7F6E;"><a name="&#x4F7F;&#x7528;&#x573A;&#x666F;&#x548C;&#x914D;&#x7F6E;" class="anchor-navigation-ex-anchor" href="#&#x4F7F;&#x7528;&#x573A;&#x666F;&#x548C;&#x914D;&#x7F6E;"><i class="fa fa-link" aria-hidden="true"></i></a><a name="&#x4F7F;&#x7528;&#x573A;&#x666F;&#x548C;&#x914D;&#x7F6E;" class="plugin-anchor" href="#&#x4F7F;&#x7528;&#x573A;&#x666F;&#x548C;&#x914D;&#x7F6E;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x4F7F;&#x7528;&#x573A;&#x666F;&#x548C;&#x914D;&#x7F6E;</h6>
<p>&#x5982;&#x679C;group&#x4E0B;&#x6240;&#x6709;consumer&#x5B9E;&#x4F8B;&#x7684;&#x8BA2;&#x9605;&#x662F;&#x76F8;&#x540C;&#x7684;&#xFF0C;&#x90A3;&#x4E48;&#x4F7F;&#x7528;round-robin&#x4F1A;&#x5E26;&#x6765;&#x66F4;&#x516C;&#x5E73;&#x7684;&#x5206;&#x914D;&#x65B9;&#x6848;&#xFF0C;&#x5426;&#x5219;&#x4F7F;&#x7528;range&#x7B56;&#x7565;&#x7684;&#x6548;&#x679C;&#x66F4;&#x597D;&#x3002;</p>
<p>&#x7528;&#x6237;&#x53EF;&#x4EE5;&#x6839;&#x636E;consumer&#x53C2;&#x6570; <code>partition.assignment.strategy</code> &#x6765;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x3002;</p>
<h2 id="&#x6838;&#x5FC3;&#x53C2;&#x6570;"><a name="&#x6838;&#x5FC3;&#x53C2;&#x6570;" class="anchor-navigation-ex-anchor" href="#&#x6838;&#x5FC3;&#x53C2;&#x6570;"><i class="fa fa-link" aria-hidden="true"></i></a>2.7. &#x6838;&#x5FC3;&#x53C2;&#x6570;</h2>
<h3 id="producer"><a name="producer" class="anchor-navigation-ex-anchor" href="#producer"><i class="fa fa-link" aria-hidden="true"></i></a>2.7.1. Producer</h3>
<ul>
<li>&#x5E38;&#x89C1;&#x5F02;&#x5E38;&#x5904;&#x7406;<ul>
<li>LeaderNotAvailableException<ul>
<li>Leader&#x526F;&#x672C;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x5BFC;&#x81F4;&#x5199;&#x5165;&#x6570;&#x636E;&#x5931;&#x8D25;&#xFF0C;&#x7B49;&#x5F85;Leader&#x91CD;&#x65B0;&#x9009;&#x4E3E;&#x3002;</li>
</ul>
</li>
<li>NotControllerException<ul>
<li>Controller&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x7B49;&#x5F85;Controller&#x91CD;&#x65B0;&#x9009;&#x4E3E;&#x3002;</li>
</ul>
</li>
<li>NetworkException<ul>
<li>&#x7F51;&#x7EDC;&#x5F02;&#x5E38;&#x3002;</li>
</ul>
</li>
<li>retries<ul>
<li>&#x91CD;&#x65B0;&#x53D1;&#x9001;&#x6570;&#x636E;&#x7684;&#x6B21;&#x6570;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A;0&#xFF0C;&#x8868;&#x793A;&#x4E0D;&#x91CD;&#x8BD5;&#x3002;</li>
</ul>
</li>
<li>retry.backoff.ms<ul>
<li>&#x4E24;&#x6B21;&#x91CD;&#x8BD5;&#x4E4B;&#x95F4;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A;100ms&#x3002;</li>
</ul>
</li>
<li><font color="red">max.in.flight.requests.per.connection &#x987A;&#x5E8F;&#x4FDD;&#x8BC1;</font><ul>
<li>&#x6BCF;&#x4E2A;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x5DF2;&#x7ECF;&#x53D1;&#x9001;&#x4F46;&#x8FD8;&#x6CA1;&#x6709;&#x6536;&#x5230;&#x670D;&#x52A1;&#x7AEF;&#x54CD;&#x5E94;&#x7684;&#x8BF7;&#x6C42;&#x4E2A;&#x6570;&#x6700;&#x5927;&#x503C;&#x3002;</li>
<li>&#x6D88;&#x606F;&#x91CD;&#x8BD5;&#x662F;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x6D88;&#x606F;&#x4E71;&#x5E8F;&#x7684;&#xFF08;<strong>&#x5982;&#x679C;&#x4E71;&#x5E8F;&#x7684;&#x6D88;&#x606F;&#x5C5E;&#x4E8E;&#x4E0D;&#x540C;&#x5206;&#x533A;&#xFF0C;&#x5219;&#x4E0D;&#x4F1A;&#x51FA;&#x73B0;&#x95EE;&#x9898;&#xFF1B;&#x4F46;&#x5982;&#x679C;&#x5C5E;&#x4E8E;&#x540C;&#x4E00;&#x4E2A;&#x5206;&#x533A;&#xFF0C;&#x5219;&#x4F1A;&#x8FDD;&#x53CD;&#x5206;&#x533A;&#x5185;&#x95F4;&#x9694;&#x6709;&#x5E8F;&#x89C4;&#x8303;</strong>&#xFF09;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; <code>max.in.flight.requests.per.connection</code> &#x53C2;&#x6570;&#x8BBE;&#x7F6E;&#x4E3A;1&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x4FDD;&#x8BC1;producer&#x5FC5;&#x987B;&#x628A;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;&#x53D1;&#x9001;&#x6210;&#x529F;&#x4E86;&#x518D;&#x53D1;&#x9001;&#x540E;&#x9762;&#x7684;&#x8BF7;&#x6C42;&#x3002;&#x907F;&#x514D;&#x6570;&#x636E;&#x51FA;&#x73B0;&#x4E71;&#x5E8F;&#x3002;</li>
</ul>
</li>
</ul>
</li>
<li>&#x63D0;&#x5347;&#x6D88;&#x606F;&#x541E;&#x5410;&#x91CF;<ul>
<li>buffer.memory<ul>
<li>&#x8BBE;&#x7F6E;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x3002;&#x9ED8;&#x8BA4;&#x503C;&#x662F;33554432&#xFF08;32MB&#xFF09;&#x3002;</li>
<li>&#x5982;&#x679C;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x51FA;&#x53BB;&#x7684;&#x901F;&#x5EA6;&#x5C0F;&#x4E8E;&#x5199;&#x5165;&#x6D88;&#x606F;&#x8FDB;&#x53BB;&#x7684;&#x901F;&#x5EA6;&#xFF0C;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x7F13;&#x51B2;&#x533A;&#x5199;&#x6EE1;&#xFF0C;&#x6B64;&#x65F6;&#x751F;&#x4EA7;&#x6D88;&#x606F;&#x5C31;&#x4F1A;&#x963B;&#x585E;&#x3002;</li>
</ul>
</li>
<li>compression.type<ul>
<li>producer&#x7528;&#x4E8E;&#x538B;&#x7F29;&#x6570;&#x636E;&#x7684;&#x538B;&#x7F29;&#x7C7B;&#x578B;&#x3002;&#x9ED8;&#x8BA4;&#x662F;none&#x8868;&#x793A;&#x65E0;&#x538B;&#x7F29;&#x3002;&#x53EF;&#x4EE5;&#x6307;&#x5B9A;gzip&#x3001;snappy&#x3002;</li>
<li>&#x538B;&#x7F29;&#x6700;&#x597D;&#x7528;&#x4E8E;&#x6279;&#x91CF;&#x5904;&#x7406;&#xFF0C;&#x6279;&#x91CF;&#x5904;&#x7406;&#x6D88;&#x606F;&#x8D8A;&#x591A;&#xFF0C;&#x538B;&#x7F29;&#x6027;&#x80FD;&#x8D8A;&#x597D;&#x3002;</li>
</ul>
</li>
<li>batch.size<ul>
<li>producer&#x6279;&#x5904;&#x7406;&#x6D88;&#x606F;&#x8BB0;&#x5F55;&#x6570;&#xFF0C;&#x4EE5;&#x51CF;&#x5C11;&#x8BF7;&#x6C42;&#x6B21;&#x6570;&#x3002;&#x6539;&#x5584;client&#x4E0E;server&#x4E4B;&#x95F4;&#x7684;&#x6027;&#x80FD;&#x3002;&#x9ED8;&#x8BA4;&#x662F;16384Bytes&#xFF0C;&#x5373;16kB&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E00;&#x4E2A;batch&#x6EE1;&#x4E86;16kB&#x5C31;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#x3002;</li>
<li>&#x5982;&#x679C;batch&#x592A;&#x5C0F;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x9891;&#x7E41;&#x7F51;&#x7EDC;&#x8BF7;&#x6C42;&#xFF0C;&#x541E;&#x5410;&#x91CF;&#x4E0B;&#x964D;&#xFF1B;&#x5982;&#x679C;batch&#x592A;&#x5927;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;&#x4E00;&#x6761;&#x6D88;&#x606F;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x5F88;&#x4E45;&#x624D;&#x80FD;&#x88AB;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#xFF0C;&#x800C;&#x4E14;&#x4F1A;&#x8BA9;&#x5185;&#x5B58;&#x7F13;&#x51B2;&#x533A;&#x6709;&#x5F88;&#x5927;&#x538B;&#x529B;&#xFF0C;&#x8FC7;&#x591A;&#x6570;&#x636E;&#x7F13;&#x51B2;&#x5728;&#x5185;&#x5B58;&#x91CC;&#x3002;</li>
</ul>
</li>
<li>linger.ms<ul>
<li>&#x6D88;&#x606F;&#x7B49;&#x5F85;&#x53D1;&#x9001;&#x65F6;&#x95F4;&#x3002;&#x9ED8;&#x8BA4;&#x662F;0&#xFF0C;&#x6D88;&#x606F;&#x88AB;&#x7ACB;&#x5373;&#x53D1;&#x9001;&#x3002;</li>
<li>&#x5047;&#x8BBE;&#x8BBE;&#x7F6E;&#x4E3A;100&#x6BEB;&#x79D2;&#xFF0C;&#x6D88;&#x606F;&#x8FDB;&#x5165;&#x4E00;&#x4E2A;batch&#xFF0C;&#x5982;&#x679C;100&#x6BEB;&#x79D2;&#x5185;&#xFF0C;&#x8FD9;&#x4E2A;batch&#x6EE1;&#x4E86;16kB&#xFF08;&#x9ED8;&#x8BA4;size&#xFF09;&#xFF0C;&#x81EA;&#x7136;&#x5C31;&#x4F1A;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#xFF1B;&#x4F46;&#x662F;&#x5982;&#x679C;100&#x6BEB;&#x79D2;&#x5185;&#xFF0C;batch&#x6CA1;&#x6EE1;&#xFF0C;&#x90A3;&#x4E48;&#x4E5F;&#x5FC5;&#x987B;&#x628A;&#x6D88;&#x606F;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#x3002;&#x5373;&#x4E0D;&#x80FD;&#x8BA9;&#x6D88;&#x606F;&#x7684;&#x53D1;&#x9001;&#x5EF6;&#x8FDF;&#x65F6;&#x95F4;&#x592A;&#x957F;&#xFF0C;&#x907F;&#x514D;&#x7ED9;&#x5185;&#x5B58;&#x9020;&#x6210;&#x8FC7;&#x5927;&#x538B;&#x529B;&#x3002;</li>
</ul>
</li>
</ul>
</li>
<li>&#x8BF7;&#x6C42;&#x8D85;&#x65F6;<ul>
<li>max.request.size<ul>
<li>&#x63A7;&#x5236;&#x53D1;&#x9001;&#x51FA;&#x53BB;&#x7684;&#x6D88;&#x606F;&#x7684;&#x5927;&#x5C0F;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;1048576&#x5B57;&#x8282;&#xFF08;1MB&#xFF09;&#x3002;</li>
<li>&#x5F88;&#x591A;&#x6D88;&#x606F;&#x53EF;&#x80FD;&#x4F1A;&#x8D85;&#x8FC7;1MB&#xFF0C;&#x4E00;&#x822C;&#x4F01;&#x4E1A;&#x8BBE;&#x7F6E;&#x4E3A;10MB&#x3002;</li>
</ul>
</li>
<li>request.timeout.ms<ul>
<li>&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x540E;&#x7684;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x9650;&#x5236;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;30&#x79D2;&#x3002;&#x5982;&#x679C;30&#x79D2;&#x6536;&#x4E0D;&#x5230;&#x54CD;&#x5E94;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x629B;&#x51FA;&#x4E00;&#x4E2A;TimeoutException&#x3002;</li>
</ul>
</li>
</ul>
</li>
<li><font color="red">ACK&#x53C2;&#x6570; &#x53EF;&#x9760;&#x6027;&#x4FDD;&#x8BC1;</font><ul>
<li>acks<ul>
<li>0&#x3002;&#x751F;&#x4EA7;&#x8005;&#x53D1;&#x6570;&#x636E;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x7B49;&#x5F85;Leader&#x5E94;&#x7B54;&#xFF0C;&#x6570;&#x636E;&#x4E22;&#x5931;&#x7684;&#x98CE;&#x9669;&#x6700;&#x9AD8;&#xFF0C;&#x4F46;&#x541E;&#x5410;&#x91CF;&#x4E5F;&#x662F;&#x6700;&#x9AD8;&#x7684;&#x3002;&#x5BF9;&#x4E8E;&#x4E00;&#x4E9B;&#x5B9E;&#x65F6;&#x6570;&#x636E;&#x5206;&#x6790;&#x573A;&#x666F;&#xFF0C;&#x5BF9;&#x6570;&#x636E;&#x51C6;&#x786E;&#x6027;&#x8981;&#x6C42;&#x4E0D;&#x9AD8;&#x7684;&#x573A;&#x666F;&#x9002;&#x7528;&#x3002;</li>
<li>1&#x3002;&#x9700;&#x8981;&#x7B49;&#x5F85;Leader&#x5E94;&#x7B54;&#x3002;&#x5728;Leader&#x8FD8;&#x6CA1;&#x6709;&#x540C;&#x6B65;Follower&#x6570;&#x636E;&#x65F6;&#x5B95;&#x673A;&#xFF0C;&#x4E5F;&#x4F1A;&#x5B58;&#x5728;&#x4E22;&#x5931;&#x6570;&#x636E;&#x7684;&#x53EF;&#x80FD;&#x3002;</li>
<li>-1 &#x6216; all&#x3002;&#x9700;&#x8981;&#x7B49;&#x5F85;Leader&#x5E94;&#x7B54;&#xFF0C;&#x5E76;&#x4E14;Leader&#x5DF2;&#x540C;&#x6B65;ISR&#x5217;&#x8868;&#x4E2D;&#x7684;<font color="red">&#x6700;&#x5C0F;&#x526F;&#x672C;&#x6570;</font>&#x3002;&#x6570;&#x636E;&#x6700;&#x5B89;&#x5168;&#xFF0C;&#x4F46;&#x6027;&#x80FD;&#x6700;&#x5DEE;&#x3002;</li>
</ul>
</li>
<li>min.insync.replicas<ul>
<li>ISR&#x5217;&#x8868;&#x6700;&#x5C0F;&#x526F;&#x672C;&#x6570;&#x3002;&#x6700;&#x5C0F;&#x4E3A;2&#xFF0C;&#x624D;&#x80FD;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x4E0D;&#x4F1A;&#x4E22;&#x5931;&#x3002;</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="broker"><a name="broker" class="anchor-navigation-ex-anchor" href="#broker"><i class="fa fa-link" aria-hidden="true"></i></a>2.7.2. Broker</h3>
<p>server.properties&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x6838;&#x5FC3;&#x53C2;&#x6570;</p>
<ul>
<li><p>broker.id</p>
<p>&#x6BCF;&#x4E2A;broker&#x90FD;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#x552F;&#x4E00;id&#x3002;</p>
</li>
<li><p>log.dirs</p>
<p>kafka&#x6240;&#x6709;&#x6570;&#x636E;&#x5199;&#x5165;&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;&#x7684;&#x78C1;&#x76D8;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x8BF4;&#x673A;&#x5668;&#x4E0A;&#x6709;&#x591A;&#x5757;&#x7269;&#x7406;&#x786C;&#x76D8;&#xFF0C;&#x90A3;&#x4E48;&#x53EF;&#x4EE5;&#x628A;&#x591A;&#x4E2A;&#x76EE;&#x5F55;&#x6302;&#x8F7D;&#x5230;&#x4E0D;&#x540C;&#x7684;&#x7269;&#x7406;&#x786C;&#x76D8;&#x4E0A;&#xFF0C;&#x7136;&#x540E;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x591A;&#x4E2A;&#x76EE;&#x5F55;&#xFF0C;&#x8FD9;&#x6837;kafka&#x53EF;&#x4EE5;&#x5C06;&#x6570;&#x636E;&#x5206;&#x6563;&#x5230;&#x591A;&#x5757;&#x7269;&#x7406;&#x786C;&#x76D8;&#xFF0C;&#x591A;&#x4E2A;&#x786C;&#x76D8;&#x7684;&#x78C1;&#x5934;&#x53EF;&#x4EE5;&#x5E76;&#x884C;&#x5199;&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x63D0;&#x5347;&#x541E;&#x5410;&#x91CF;&#x3002;</p>
</li>
<li><p>zookeeper.connect</p>
<p>&#x6307;&#x5411;ZooKeeper&#x96C6;&#x7FA4;&#x3002;</p>
</li>
<li><p>listeners</p>
<p>broker&#x76D1;&#x542C;&#x5BA2;&#x6237;&#x7AEF;&#x53D1;&#x8D77;&#x8BF7;&#x6C42;&#x7684;&#x7AEF;&#x53E3;&#x53F7;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;9092&#x3002;</p>
</li>
<li><p>unclean.leader.election.enable</p>
<p>&#x9ED8;&#x8BA4;&#x662F;false&#xFF08;1.0&#x7248;&#x672C;&#x4E4B;&#x540E;&#xFF09;&#xFF0C;&#x53EA;&#x80FD;&#x9009;&#x4E3E;ISR&#x5217;&#x8868;&#x7684;follower&#x6210;&#x4E3A;&#x65B0;&#x7684;leader&#x3002;</p>
</li>
<li><p>delete.topic.enable</p>
<p>&#x9ED8;&#x8BA4;true&#xFF0C;&#x5141;&#x8BB8;&#x5220;&#x9664;topic&#x3002;</p>
</li>
<li><p>log.retention.hours</p>
<p>&#x4FDD;&#x7559;&#x6570;&#x636E;&#x65F6;&#x95F4;&#xFF08;&#x9ED8;&#x8BA4;168&#x5C0F;&#x65F6;&#xFF0C;&#x5373;7&#x5929;&#xFF09;&#x3002;</p>
</li>
</ul>
<h3 id="consumer"><a name="consumer" class="anchor-navigation-ex-anchor" href="#consumer"><i class="fa fa-link" aria-hidden="true"></i></a>2.7.3. Consumer</h3>
<ul>
<li><p>heartbeat.interval.ms</p>
<p>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;3000 consumer&#x5FC3;&#x8DF3;&#x65F6;&#x95F4;&#xFF0C;&#x5FC5;&#x987B;&#x5F97;&#x4FDD;&#x6301;&#x5FC3;&#x8DF3;&#x624D;&#x80FD;&#x77E5;&#x9053;consumer&#x662F;&#x5426;&#x6545;&#x969C;&#x4E86;&#xFF0C;&#x7136;&#x540E;&#x5982;&#x679C;&#x6545;&#x969C;&#x4E4B;&#x540E;&#xFF0C;&#x5C31;&#x4F1A;&#x901A;&#x8FC7;&#x5FC3;&#x8DF3;&#x4E0B;&#x53D1;rebalance&#x7684;&#x6307;&#x4EE4;&#x7ED9;&#x5176;&#x4ED6;&#x7684;consumer&#x901A;&#x77E5;&#x4ED6;&#x4EEC;&#x8FDB;&#x884C;rebalance&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
</li>
<li><p>session.timeout.ms</p>
<p>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;10000     kafka&#x591A;&#x957F;&#x65F6;&#x95F4;&#x611F;&#x77E5;&#x4E0D;&#x5230;&#x4E00;&#x4E2A;consumer&#x5C31;&#x8BA4;&#x4E3A;&#x4ED6;&#x6545;&#x969C;&#x4E86;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;10&#x79D2;&#x3002;</p>
</li>
<li><p>max.poll.interval.ms</p>
<p>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;300000 &#x5982;&#x679C;&#x5728;&#x4E24;&#x6B21;poll&#x64CD;&#x4F5C;&#x4E4B;&#x95F4;&#xFF0C;&#x8D85;&#x8FC7;&#x4E86;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x4F1A;&#x8BA4;&#x4E3A;&#x8FD9;&#x4E2A;consume&#x5904;&#x7406;&#x80FD;&#x529B;&#x4E0D;&#x8DB3;&#xFF0C;&#x4F1A;&#x88AB;&#x8E22;&#x51FA;&#x6D88;&#x8D39;&#x7EC4;&#xFF0C;&#x5206;&#x533A;&#x5206;&#x914D;&#x7ED9;&#x5176;&#x4ED6;Consumer&#x53BB;&#x6D88;&#x8D39;&#x3002;</p>
</li>
<li><p>fetch.max.bytes</p>
<p>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;1048576 &#x83B7;&#x53D6;&#x4E00;&#x6761;&#x6D88;&#x606F;&#x6700;&#x5927;&#x7684;&#x5B57;&#x8282;&#x6570;&#xFF0C;&#x4E00;&#x822C;&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x5927;&#x4E00;&#x4E9B;&#x3002;</p>
</li>
<li><p>max.poll.records</p>
<p>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;500&#x6761; &#x4E00;&#x6B21;poll&#x8FD4;&#x56DE;&#x6D88;&#x606F;&#x7684;&#x6700;&#x5927;&#x6761;&#x6570;&#x3002;</p>
</li>
<li><p>connections.max.idle.ms</p>
<p>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;540000 consumer&#x8DDF;broker&#x7684;socket&#x8FDE;&#x63A5;&#x5982;&#x679C;&#x7A7A;&#x95F2;&#x8D85;&#x8FC7;&#x4E86;&#x4E00;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x6B64;&#x65F6;&#x5C31;&#x4F1A;&#x81EA;&#x52A8;&#x56DE;&#x6536;&#x8FDE;&#x63A5;&#xFF0C;&#x4F46;&#x662F;&#x4E0B;&#x6B21;&#x6D88;&#x8D39;&#x5C31;&#x8981;&#x91CD;&#x65B0;&#x5EFA;&#x7ACB;socket&#x8FDE;&#x63A5;&#xFF0C;&#x8FD9;&#x4E2A;&#x5EFA;&#x8BAE;&#x8BBE;&#x7F6E;&#x4E3A;-1&#xFF0C;&#x4E0D;&#x53BB;&#x56DE;&#x6536;&#x3002;</p>
</li>
<li><p>auto.offset.reset</p>
<p>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;latest</p>
<ul>
<li>earliest: &#x5F53;&#x5404;&#x5206;&#x533A;&#x6709;&#x5DF2;&#x63D0;&#x4EA4;&#x7684;offset&#x65F6;&#xFF0C;&#x4ECE;&#x63D0;&#x4EA4;&#x7684;offset&#x5F00;&#x59CB;&#x6D88;&#x8D39;&#xFF1B;&#x65E0;&#x63D0;&#x4EA4;&#x7684;offset&#x65F6;&#xFF0C;&#x4ECE;&#x5934;&#x5F00;&#x59CB;&#x6D88;&#x8D39;&#x3002;</li>
<li>latest: &#x5F53;&#x5404;&#x5206;&#x533A;&#x4E0B;&#x6709;&#x5DF2;&#x63D0;&#x4EA4;&#x7684;offset&#x65F6;&#xFF0C;&#x4ECE;&#x63D0;&#x4EA4;&#x7684;offset&#x5F00;&#x59CB;&#x6D88;&#x8D39;&#xFF1B;&#x65E0;&#x63D0;&#x4EA4;&#x7684;offset&#x65F6;&#xFF0C;&#x6D88;&#x8D39;&#x65B0;&#x4EA7;&#x751F;&#x7684;&#x8BE5;&#x5206;&#x533A;&#x4E0B;&#x7684;&#x6570;&#x636E;&#x3002;</li>
<li>none: topic&#x5404;&#x5206;&#x533A;&#x90FD;&#x5B58;&#x5728;&#x5DF2;&#x63D0;&#x4EA4;&#x7684;offset&#x65F6;&#xFF0C;&#x4ECE;offset&#x540E;&#x5F00;&#x59CB;&#x6D88;&#x8D39;&#xFF1B;&#x53EA;&#x8981;&#x6709;&#x4E00;&#x4E2A;&#x5206;&#x533A;&#x4E0D;&#x5B58;&#x5728;&#x5DF2;&#x63D0;&#x4EA4;&#x7684;offset&#xFF0C;&#x5219;&#x629B;&#x51FA;&#x5F02;&#x5E38;&#x3002;</li>
</ul>
</li>
<li><p>enable.auto.commit</p>
<p>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;true &#x8BBE;&#x7F6E;&#x4E3A;&#x81EA;&#x52A8;&#x63D0;&#x4EA4;offset&#x3002;</p>
</li>
<li><p>auto.commit.interval.ms</p>
<p>&#x9ED8;&#x8BA4;&#x503C;&#xFF1A;60 * 1000 &#x81EA;&#x52A8;&#x63D0;&#x4EA4;&#x504F;&#x79FB;&#x91CF;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#x3002;</p>
</li>
</ul>
<h1 id="kafka&#x7CFB;&#x7EDF;&#x96C6;&#x6210;"><a name="kafka&#x7CFB;&#x7EDF;&#x96C6;&#x6210;" class="anchor-navigation-ex-anchor" href="#kafka&#x7CFB;&#x7EDF;&#x96C6;&#x6210;"><i class="fa fa-link" aria-hidden="true"></i></a>3. Kafka&#x7CFB;&#x7EDF;&#x96C6;&#x6210;</h1>
<h2 id="&#x6574;&#x5408;flume"><a name="&#x6574;&#x5408;flume" class="anchor-navigation-ex-anchor" href="#&#x6574;&#x5408;flume"><i class="fa fa-link" aria-hidden="true"></i></a>3.1. &#x6574;&#x5408;flume</h2>
<h3 id="flume-&#x914D;&#x7F6E;"><a name="flume-&#x914D;&#x7F6E;" class="anchor-navigation-ex-anchor" href="#flume-&#x914D;&#x7F6E;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.1. flume &#x914D;&#x7F6E;</h3>
<p>flume-kafka.conf</p>
<pre><code class="lang-properties">a1.sources = r1
a1.channels = c1
a1.sinks = k1

a1.sources.r1.type = exec
a1.sources.r1.command = tail -F /home/hadoop/flumedatas/taillogs/access_log
a1.sources.r1.channels = c1

a1.channels.c1.type = memory
a1.channels.c1.capacity = 1000
a1.channels.c1.transactionCapacity = 100

a1.sinks.k1.channel = c1
a1.sinks.k1.type = org.apache.flume.sink.kafka.KafkaSink
a1.sinks.k1.kafka.topic = flumetest
a1.sinks.k1.kafka.bootstrap.servers = node01:9092,node02:9092,node03:9092
a1.sinks.k1.kafka.flumeBatchSize = 20
a1.sinks.k1.kafka.producer.acks = 1
</code></pre>
<h3 id="&#x521B;&#x5EFA;topic"><a name="&#x521B;&#x5EFA;topic" class="anchor-navigation-ex-anchor" href="#&#x521B;&#x5EFA;topic"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.2. &#x521B;&#x5EFA;topic</h3>
<pre><code class="lang-shell">bin/kafka-topics.sh --create --topic flumetest --partitions 2 --replication-factor 2  --zookeeper node01:2181,node02:2181,node03:2181
</code></pre>
<h3 id="&#x542F;&#x52A8;flume"><a name="&#x542F;&#x52A8;flume" class="anchor-navigation-ex-anchor" href="#&#x542F;&#x52A8;flume"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.3. &#x542F;&#x52A8;flume</h3>
<pre><code class="lang-shell">flume-ng agent -n a1 -c /bigdata/install/apache-flume-1.6.0-cdh5.14.2-bin/conf -f flume-kafka.conf -Dflume.root.logger=info,console
</code></pre>
<h3 id="&#x5411;flume&#x53D1;&#x9001;&#x6570;&#x636E;"><a name="&#x5411;flume&#x53D1;&#x9001;&#x6570;&#x636E;" class="anchor-navigation-ex-anchor" href="#&#x5411;flume&#x53D1;&#x9001;&#x6570;&#x636E;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.4. &#x5411;flume&#x53D1;&#x9001;&#x6570;&#x636E;</h3>
<pre><code class="lang-shell">echo &quot;hello&quot; &gt;&gt; /home/hadoop/flumedatas/taillogs/access_log
echo &quot;flume to kafka&quot; &gt;&gt; /home/hadoop/flumedatas/taillogs/access_log
</code></pre>
<h3 id="&#x9A8C;&#x8BC1;kafka&#x6570;&#x636E;&#x5199;&#x5165;&#x6210;&#x529F;"><a name="&#x9A8C;&#x8BC1;kafka&#x6570;&#x636E;&#x5199;&#x5165;&#x6210;&#x529F;" class="anchor-navigation-ex-anchor" href="#&#x9A8C;&#x8BC1;kafka&#x6570;&#x636E;&#x5199;&#x5165;&#x6210;&#x529F;"><i class="fa fa-link" aria-hidden="true"></i></a>3.1.5. &#x9A8C;&#x8BC1;kafka&#x6570;&#x636E;&#x5199;&#x5165;&#x6210;&#x529F;</h3>
<pre><code class="lang-shell">bin/kafka-console-consumer.sh --topic flumetest --bootstrap-server node01:9092,node02:9092,node03:9092  --from-beginning
</code></pre>
<footer class="page-footer"><span class="copyright">Copyright &#xA9; sciatta.com 2020 all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x4FEE;&#x8BA2;&#x65F6;&#x95F4;: 
2021-03-01 19:45:03
</span></footer>
<script>console.log("plugin-popup....");document.onclick = function(e){ e.target.tagName === "IMG" && window.open(e.target.src,e.target.src)}</script><style>img{cursor:pointer}</style>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Kafka监控工具.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Kafka监控工具">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Kafka分布式消息流平台","level":"1.2.5.1.3","depth":4,"next":{"title":"Hadoop","level":"1.2.6","depth":2,"ref":"","articles":[{"title":"HDFS","level":"1.2.6.1","depth":3,"ref":"","articles":[{"title":"HDFS核心功能原理","level":"1.2.6.1.1","depth":4,"path":"src/develop/hadoop/hdfs/HDFS核心功能原理.md","ref":"src/develop/hadoop/hdfs/HDFS核心功能原理.md","articles":[]},{"title":"HDFS命令","level":"1.2.6.1.2","depth":4,"path":"src/develop/hadoop/hdfs/HDFS命令.md","ref":"src/develop/hadoop/hdfs/HDFS命令.md","articles":[]},{"title":"HDFS源码分析","level":"1.2.6.1.3","depth":4,"path":"src/develop/hadoop/hdfs/HDFS源码分析.md","ref":"src/develop/hadoop/hdfs/HDFS源码分析.md","articles":[]}]},{"title":"MapReduce","level":"1.2.6.2","depth":3,"ref":"","articles":[{"title":"MapReduce工作原理","level":"1.2.6.2.1","depth":4,"path":"src/develop/hadoop/mapreduce/MapReduce工作原理.md","ref":"src/develop/hadoop/mapreduce/MapReduce工作原理.md","articles":[]}]},{"title":"YARN","level":"1.2.6.3","depth":3,"ref":"","articles":[{"title":"YARN架构","level":"1.2.6.3.1","depth":4,"path":"src/develop/hadoop/yarn/YARN架构.md","ref":"src/develop/hadoop/yarn/YARN架构.md","articles":[]}]},{"title":"Hadoop集群安装部署","level":"1.2.6.4","depth":3,"path":"src/develop/hadoop/Hadoop集群安装部署.md","ref":"src/develop/hadoop/Hadoop集群安装部署.md","articles":[]},{"title":"Hadoop HA集群安装部署","level":"1.2.6.5","depth":3,"path":"src/develop/hadoop/Hadoop HA集群安装部署.md","ref":"src/develop/hadoop/Hadoop HA集群安装部署.md","articles":[]},{"title":"Hadoop企业级调优","level":"1.2.6.6","depth":3,"path":"src/develop/hadoop/Hadoop企业级调优.md","ref":"src/develop/hadoop/Hadoop企业级调优.md","articles":[]}]},"previous":{"title":"Kafka监控工具","level":"1.2.5.1.2","depth":4,"path":"src/develop/mq/kafka/Kafka监控工具.md","ref":"src/develop/mq/kafka/Kafka监控工具.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["hide-element","expandable-chapters","code","splitter","-lunr","-search","search-pro","pageview-count","tbfed-pagefooter","popup","auto-scroll-table","-sharing","github","github-buttons","ga","baidu-v3","donate","anchors","anchor-navigation-ex","sitemap"],"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright &copy sciatta.com 2020","modify_label":"修订时间: ","modify_format":"YYYY-MM-DD HH:mm:ss"},"github":{"url":"https://github.com/sciatta"},"splitter":{},"search-pro":{},"auto-scroll-table":{},"popup":{},"code":{"copyButtons":true},"donate":{"alipay":"/develop-stack/assets/alipay.jpg","alipayText":" ","button":"捐赠","title":"","wechat":"/develop-stack/assets/wechat.jpg","wechatText":" "},"baidu-v3":{},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"anchor-navigation-ex":{"associatedWithSummary":false,"float":{"floatIcon":"fa fa-navicon","level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"sitemap":{"hostname":"http://www.sciatta.com/"},"pageview-count":{},"github-buttons":{"buttons":[{"user":"sciatta","repo":"develop-stack","type":"star","count":true,"size":"small"}]},"ga":{"configuration":"auto","token":"UA-156491400-1"},"baidu":{"token":"c6612709c010da681bbd4b785968a638"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{},"expandable-chapters":{}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"src/develop/mq/kafka/Kafka分布式消息流平台.md","mtime":"2021-03-01T11:45:03.361Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-03-07T13:19:15.450Z"},"basePath":"../../../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../../../gitbook/gitbook.js"></script>
    <script src="../../../../gitbook/theme.js"></script>
    
        
        <script src="../../../../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-auto-scroll-table/plugin.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-baidu-v3/baidu-tongji.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-donate/plugin.js"></script>
        
    
        
        <script src="../../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

